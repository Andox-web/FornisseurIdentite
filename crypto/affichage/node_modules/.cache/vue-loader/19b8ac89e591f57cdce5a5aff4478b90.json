{"remainingRequest":"E:\\dev\\FornisseurIdentite\\crypto\\affichage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\dev\\FornisseurIdentite\\crypto\\affichage\\src\\pages\\frontoffice\\Portefeuille.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\dev\\FornisseurIdentite\\crypto\\affichage\\src\\pages\\frontoffice\\Portefeuille.vue","mtime":1739018947624},{"path":"E:\\dev\\FornisseurIdentite\\crypto\\affichage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739020670398},{"path":"E:\\dev\\FornisseurIdentite\\crypto\\affichage\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1739022456732},{"path":"E:\\dev\\FornisseurIdentite\\crypto\\affichage\\node_modules\\babel-loader\\lib\\index.js","mtime":1739020593006},{"path":"E:\\dev\\FornisseurIdentite\\crypto\\affichage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739020670398},{"path":"E:\\dev\\FornisseurIdentite\\crypto\\affichage\\node_modules\\vue-loader\\lib\\index.js","mtime":1739022549058}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIGltcG9ydCBMVGFibGUgZnJvbSAnc3JjL2NvbXBvbmVudHMvVGFibGUudnVlJw0KICBpbXBvcnQgQ2FyZCBmcm9tICdzcmMvY29tcG9uZW50cy9DYXJkcy9DYXJkLnZ1ZScNCg0KICBjb25zdCB0YWJsZUNvbHVtbnMgPSBbJ0lkJywgJ2NyeXB0bycsICdwcml4JywgJ3F1YW50aXRlJ10NCiAgY29uc3QgdGFibGVDb2x1bW5zRmlhdCA9IFsnSWQnLCAnZGV2aXMnLCAncXVhbnRpdGUnXQ0KDQogIGV4cG9ydCBkZWZhdWx0IHsNCiAgICBjb21wb25lbnRzOiB7DQogICAgICBMVGFibGUsDQogICAgICBDYXJkDQogICAgfSwNCiAgICBkYXRhKCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgdGFibGUxOiB7DQogICAgICAgICAgY29sdW1uczogWy4uLnRhYmxlQ29sdW1uc10sDQogICAgICAgICAgZGF0YTogW10NCiAgICAgICAgfSwNCiAgICAgICAgdGFibGUyOiB7DQogICAgICAgICAgY29sdW1uczogWy4uLnRhYmxlQ29sdW1uc0ZpYXRdLA0KICAgICAgICAgIGRhdGE6IFtdDQogICAgICAgIH0sDQogICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJycsDQogICAgICAgIGFtb3VudDogJycNCiAgICAgIH07DQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAvLyBNw6l0aG9kZSBwb3VyIHNvdW1ldHRyZSBsYSBkZW1hbmRlDQogICAgICBzdWJtaXRSZXF1ZXN0KCkgew0KICAgICAgICBhbGVydChgRGVtYW5kZSBkZSAke3RoaXMudHJhbnNhY3Rpb25UeXBlfSBkZSAke3RoaXMuYW1vdW50fSBlbnZvecOpZS5gKTsNCiAgICAgIH0sDQoNCiAgICAgIC8vIE3DqXRob2RlIHBvdXIgcsOpY3Vww6lyZXIgbGVzIGRvbm7DqWVzIGRlIGwnQVBJDQogICAgICBhc3luYyBmZXRjaFBvcnRlZmV1aWxsZSgpIHsNCiAgICAgICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0aF90b2tlbicpOw0KICAgICAgICBpZiAoIXRva2VuKSB7DQogICAgICAgICAgYWxlcnQoIlRva2VuIGludHJvdXZhYmxlIGRhbnMgbGUgbG9jYWxTdG9yYWdlIik7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjgwODEvcG9ydGVmZXVpbGxlJywgew0KICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywNCiAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dG9rZW59YA0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pOw0KDQogICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgew0KICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJldXIgZGUgcsOpY3Vww6lyYXRpb24gZGVzIGRvbm7DqWVzJyk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsNCg0KICAgICAgICAgIC8vIEFmZmVjdGF0aW9uIGRlcyBkb25uw6llcyBkYW5zIGxlcyB0YWJsZWF1eA0KICAgICAgICAgIHRoaXMudGFibGUxLmRhdGEgPSBkYXRhLnBvcnRlZmV1aWxsZV9jcnlwdG8ubWFwKGl0ZW0gPT4gKHsNCiAgICAgICAgICAgIGlkOiBpdGVtLmlkLA0KICAgICAgICAgICAgY3J5cHRvOiBpdGVtLmNyeXB0b21vbm5haWUubm9tLA0KICAgICAgICAgICAgcHJpeDogYCQke2l0ZW0ucXVhbnRpdGUudG9GaXhlZCgyKX1gLA0KICAgICAgICAgICAgcXVhbnRpdGU6IGl0ZW0ucXVhbnRpdGUNCiAgICAgICAgICB9KSk7DQoNCiAgICAgICAgICB0aGlzLnRhYmxlMi5kYXRhID0gZGF0YS5wb3J0ZWZldWlsbGVfZmlhdC5tYXAoaXRlbSA9PiAoew0KICAgICAgICAgICAgaWQ6IGl0ZW0uaWQsDQogICAgICAgICAgICBkZXZpczogaXRlbS51dGlsaXNhdGV1ci5ub20sICAvLyBPdSBhdXRyZSBhdHRyaWJ1dCBwZXJ0aW5lbnQgZGUgbCd1dGlsaXNhdGV1cg0KICAgICAgICAgICAgcXVhbnRpdGU6IGAkJHtpdGVtLnF1YW50aXRlLnRvRml4ZWQoMil9YA0KICAgICAgICAgIH0pKTsNCg0KICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyBkb25uw6llcyA6IiwgZXJyb3IpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBtb3VudGVkKCkgew0KICAgICAgdGhpcy5mZXRjaFBvcnRlZmV1aWxsZSgpOw0KICAgIH0NCiAgfQ0K"},{"version":3,"sources":["Portefeuille.vue"],"names":[],"mappings":";AA6DA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Portefeuille.vue","sourceRoot":"src/pages/frontoffice","sourcesContent":["<template>\r\n  <div class=\"content\">\r\n    <div class=\"container-fluid\">\r\n      <div class=\"row\">\r\n        <div class=\"col-12\">\r\n          <card class=\"strpied-tabled-with-hover\"\r\n                body-classes=\"table-full-width table-responsive\"\r\n          >\r\n            <template slot=\"header\">\r\n              <h4 class=\"card-title\">Portefeuille crypto</h4>\r\n              <p class=\"card-category\"></p>\r\n            </template>\r\n            <l-table class=\"table-hover table-striped\"\r\n                     :columns=\"table1.columns\"\r\n                     :data=\"table1.data\"\r\n                     @button-clicked=\"handleButtonClick\">\r\n            </l-table>\r\n          </card>\r\n        </div>\r\n\r\n        <div class=\"col-12\">\r\n          <card class=\"card-plain\">\r\n            <template slot=\"header\">\r\n              <h4 class=\"card-title\">Portefeuille Fiat</h4>\r\n              <p class=\"card-category\">Vous pouvez les échanger contre des cryptos</p>\r\n            </template>\r\n            <div class=\"table-responsive\">\r\n              <l-table class=\"table-hover\"\r\n                       :columns=\"table2.columns\"\r\n                       :data=\"table2.data\">\r\n              </l-table>\r\n            </div>\r\n          </card>\r\n        </div>\r\n\r\n        <div class=\"col-12\">\r\n          <card class=\"card-body\">\r\n            <template slot=\"header\">\r\n              <h4 class=\"card-title\">Demande de retrait/dépôt</h4>\r\n            </template>\r\n            <div class=\"form-group\">\r\n              <label for=\"transactionType\">Type de transaction</label>\r\n              <select v-model=\"transactionType\" class=\"form-control\">\r\n                <option value=\"depot\">Dépôt</option>\r\n                <option value=\"retrait\">Retrait</option>\r\n              </select>\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"amount\">Quantité</label>\r\n              <input v-model=\"amount\" type=\"number\" class=\"form-control\" placeholder=\"Entrez la quantité\">\r\n            </div>\r\n            <button @click=\"submitRequest\" class=\"btn btn-primary\">Envoyer la demande</button>\r\n          </card>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import LTable from 'src/components/Table.vue'\r\n  import Card from 'src/components/Cards/Card.vue'\r\n\r\n  const tableColumns = ['Id', 'crypto', 'prix', 'quantite']\r\n  const tableColumnsFiat = ['Id', 'devis', 'quantite']\r\n\r\n  export default {\r\n    components: {\r\n      LTable,\r\n      Card\r\n    },\r\n    data() {\r\n      return {\r\n        table1: {\r\n          columns: [...tableColumns],\r\n          data: []\r\n        },\r\n        table2: {\r\n          columns: [...tableColumnsFiat],\r\n          data: []\r\n        },\r\n        transactionType: '',\r\n        amount: ''\r\n      };\r\n    },\r\n    methods: {\r\n      // Méthode pour soumettre la demande\r\n      submitRequest() {\r\n        alert(`Demande de ${this.transactionType} de ${this.amount} envoyée.`);\r\n      },\r\n\r\n      // Méthode pour récupérer les données de l'API\r\n      async fetchPortefeuille() {\r\n        const token = localStorage.getItem('auth_token');\r\n        if (!token) {\r\n          alert(\"Token introuvable dans le localStorage\");\r\n          return;\r\n        }\r\n\r\n        try {\r\n          const response = await fetch('http://localhost:8081/portefeuille', {\r\n            method: 'GET',\r\n            headers: {\r\n              'Authorization': `Bearer ${token}`\r\n            }\r\n          });\r\n\r\n          if (!response.ok) {\r\n            throw new Error('Erreur de récupération des données');\r\n          }\r\n\r\n          const data = await response.json();\r\n\r\n          // Affectation des données dans les tableaux\r\n          this.table1.data = data.portefeuille_crypto.map(item => ({\r\n            id: item.id,\r\n            crypto: item.cryptomonnaie.nom,\r\n            prix: `$${item.quantite.toFixed(2)}`,\r\n            quantite: item.quantite\r\n          }));\r\n\r\n          this.table2.data = data.portefeuille_fiat.map(item => ({\r\n            id: item.id,\r\n            devis: item.utilisateur.nom,  // Ou autre attribut pertinent de l'utilisateur\r\n            quantite: `$${item.quantite.toFixed(2)}`\r\n          }));\r\n\r\n        } catch (error) {\r\n          console.error(\"Erreur lors de la récupération des données :\", error);\r\n        }\r\n      }\r\n    },\r\n    mounted() {\r\n      this.fetchPortefeuille();\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"]}]}