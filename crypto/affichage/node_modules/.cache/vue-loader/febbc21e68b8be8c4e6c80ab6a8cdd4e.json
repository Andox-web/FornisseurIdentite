{"remainingRequest":"F:\\Manoa\\vaovao\\ITU\\S5\\Mr Rojo\\examen\\crypto-1\\FornisseurIdentite\\crypto\\affichage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Manoa\\vaovao\\ITU\\S5\\Mr Rojo\\examen\\crypto-1\\FornisseurIdentite\\crypto\\affichage\\src\\pages\\frontoffice\\Annonce.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\Manoa\\vaovao\\ITU\\S5\\Mr Rojo\\examen\\crypto-1\\FornisseurIdentite\\crypto\\affichage\\src\\pages\\frontoffice\\Annonce.vue","mtime":1738955969899},{"path":"F:\\Manoa\\vaovao\\ITU\\S5\\Mr Rojo\\examen\\crypto-1\\FornisseurIdentite\\crypto\\affichage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1737957116215},{"path":"F:\\Manoa\\vaovao\\ITU\\S5\\Mr Rojo\\examen\\crypto-1\\FornisseurIdentite\\crypto\\affichage\\node_modules\\babel-loader\\lib\\index.js","mtime":1737957106813},{"path":"F:\\Manoa\\vaovao\\ITU\\S5\\Mr Rojo\\examen\\crypto-1\\FornisseurIdentite\\crypto\\affichage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1737957116215},{"path":"F:\\Manoa\\vaovao\\ITU\\S5\\Mr Rojo\\examen\\crypto-1\\FornisseurIdentite\\crypto\\affichage\\node_modules\\vue-loader\\lib\\index.js","mtime":1737957107578}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgaW1wb3J0IENhcmQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ2FyZHMvQ2FyZC52dWUnCgogIGV4cG9ydCBkZWZhdWx0IHsKICAgIGNvbXBvbmVudHM6IHsKICAgICAgQ2FyZAogICAgfSwKICAgIGRhdGEoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdGFibGVEYXRhOiBbXQogICAgICB9OwogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgIHRoaXMuZ2V0Q3J5cHRvcygpOwogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgLy8gRm9uY3Rpb24gcG91ciByw6ljdXDDqXJlciBsZXMgY3J5cHRvbW9ubmFpZXMgZGVwdWlzIGwnQVBJCiAgICAgIGdldENyeXB0b3MoKSB7CiAgICAgICAgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9jcnlwdG9zJykKICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkKICAgICAgICAgIC50aGVuKGRhdGEgPT4gewogICAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IGRhdGEubWFwKGNyeXB0byA9PiAoewogICAgICAgICAgICAgIGlkOiBjcnlwdG8uaWQsCiAgICAgICAgICAgICAgbm9tOiBjcnlwdG8ubm9tLAogICAgICAgICAgICAgIHByaXg6ICckMTAwJywgLy8gRXhlbXBsZSBkZSBwcml4IHBvdXIgY2hhcXVlIGNyeXB0byAow6AgYWRhcHRlciBzZWxvbiBsZXMgZG9ubsOpZXMpCiAgICAgICAgICAgICAgcXVhbnRpdGU6IDAKICAgICAgICAgICAgfSkpOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmVycm9yKCdFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgY3J5cHRvczonLCBlcnJvcikpOwogICAgICB9LAoKICAgICAgLy8gRm9uY3Rpb24gZCdhY2hhdCBkJ3VuZSBjcnlwdG8KICAgICAgYWNoZXRlcihpdGVtKSB7CiAgICAgICAgaWYgKGl0ZW0ucXVhbnRpdGUgPiAwKSB7CiAgICAgICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRoX3Rva2VuJyk7IC8vIFLDqWN1cMOpcmVyIGxlIHRva2VuIGRlcHVpcyBsb2NhbFN0b3JhZ2UKICAgICAgICAgIGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjgwODEvYWNoYXQnLCB7CiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dG9rZW59YCwKICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYm9keTogbmV3IFVSTFNlYXJjaFBhcmFtcyh7CiAgICAgICAgICAgICAgY3J5cHRvX2lkOiBpdGVtLmlkLAogICAgICAgICAgICAgIHF1YW50aXRlOiBpdGVtLnF1YW50aXRlCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9KQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpCiAgICAgICAgICAgIC50aGVuKGRhdGEgPT4gewogICAgICAgICAgICAgIGlmIChkYXRhLm9rKSB7CiAgICAgICAgICAgICAgICBhbGVydChgQWNoYXQgZGUgJHtpdGVtLnF1YW50aXRlfSAke2l0ZW0ubm9tfSByw6l1c3NpLmApOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBhbGVydCgnRXJyZXVyIGxvcnMgZGUgbFwnYWNoYXQuJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5lcnJvcignRXJyZXVyIGRcJ2FjaGF0OicsIGVycm9yKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFsZXJ0KCdWZXVpbGxleiBlbnRyZXIgdW5lIHF1YW50aXTDqSB2YWxpZGUuJyk7CiAgICAgICAgfQogICAgICB9LAoKICAgICAgLy8gRm9uY3Rpb24gZGUgdmVudGUgZCd1bmUgY3J5cHRvCiAgICAgIHZlbmRyZShpdGVtKSB7CiAgICAgICAgaWYgKGl0ZW0ucXVhbnRpdGUgPiAwKSB7CiAgICAgICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRoX3Rva2VuJyk7IC8vIFLDqWN1cMOpcmVyIGxlIHRva2VuIGRlcHVpcyBsb2NhbFN0b3JhZ2UKICAgICAgICAgIGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjgwODEvdmVudGUnLCB7CiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dG9rZW59YCwKICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYm9keTogbmV3IFVSTFNlYXJjaFBhcmFtcyh7CiAgICAgICAgICAgICAgY3J5cHRvX2lkOiBpdGVtLmlkLAogICAgICAgICAgICAgIHF1YW50aXRlOiBpdGVtLnF1YW50aXRlCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9KQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpCiAgICAgICAgICAgIC50aGVuKGRhdGEgPT4gewogICAgICAgICAgICAgIGlmIChkYXRhLm9rKSB7CiAgICAgICAgICAgICAgICBhbGVydChgVmVudGUgZGUgJHtpdGVtLnF1YW50aXRlfSAke2l0ZW0ubm9tfSByw6l1c3NpZS5gKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYWxlcnQoJ0VycmV1ciBsb3JzIGRlIGxhIHZlbnRlLicpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBkZSB2ZW50ZTonLCBlcnJvcikpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydCgnVmV1aWxsZXogZW50cmVyIHVuZSBxdWFudGl0w6kgdmFsaWRlLicpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07Cg=="},{"version":3,"sources":["Annonce.vue"],"names":[],"mappings":";AA+CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Annonce.vue","sourceRoot":"src/pages/frontoffice","sourcesContent":["<template>\n  <div class=\"content\">\n    <div class=\"container-fluid\">\n      <div class=\"row\">\n        <div class=\"col-12\">\n          <card class=\"strpied-tabled-with-hover\"\n                body-classes=\"table-full-width table-responsive\"\n          >\n            <template slot=\"header\">\n              <h4 class=\"card-title\">Achat/vente cryptomonnaie</h4>\n              <p class=\"card-category\">Liste des cryptos </p>\n            </template>\n            <table class=\"table table-hover table-striped\">\n              <thead>\n                <tr>\n                  <th>Crypto</th>\n                  <th>Prix</th>\n                  <th>Quantité</th>\n                  <th>Action</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"(item, index) in tableData\" :key=\"item.id\">\n                  <td>{{ item.nom }}</td>\n                  <td>{{ item.prix }}</td>\n                  <td>\n                    <input type=\"number\"\n                           v-model=\"item.quantite\"\n                           min=\"0\"\n                           :placeholder=\"'Quantité'\"\n                           class=\"form-control\" />\n                  </td>\n                  <td>\n                    <button @click=\"acheter(item)\" class=\"btn btn-primary\">Acheter</button>\n                    <button @click=\"vendre(item)\" class=\"btn btn-danger\">Vendre</button>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </card>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import Card from 'src/components/Cards/Card.vue'\n\n  export default {\n    components: {\n      Card\n    },\n    data() {\n      return {\n        tableData: []\n      };\n    },\n    mounted() {\n      this.getCryptos();\n    },\n    methods: {\n      // Fonction pour récupérer les cryptomonnaies depuis l'API\n      getCryptos() {\n        fetch('http://localhost:8081/cryptos')\n          .then(response => response.json())\n          .then(data => {\n            this.tableData = data.map(crypto => ({\n              id: crypto.id,\n              nom: crypto.nom,\n              prix: '$100', // Exemple de prix pour chaque crypto (à adapter selon les données)\n              quantite: 0\n            }));\n          })\n          .catch(error => console.error('Erreur lors de la récupération des cryptos:', error));\n      },\n\n      // Fonction d'achat d'une crypto\n      acheter(item) {\n        if (item.quantite > 0) {\n          const token = localStorage.getItem('auth_token'); // Récupérer le token depuis localStorage\n          fetch('http://localhost:8081/achat', {\n            method: 'POST',\n            headers: {\n              'Authorization': `Bearer ${token}`,\n              'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            body: new URLSearchParams({\n              crypto_id: item.id,\n              quantite: item.quantite\n            })\n          })\n            .then(response => response.json())\n            .then(data => {\n              if (data.ok) {\n                alert(`Achat de ${item.quantite} ${item.nom} réussi.`);\n              } else {\n                alert('Erreur lors de l\\'achat.');\n              }\n            })\n            .catch(error => console.error('Erreur d\\'achat:', error));\n        } else {\n          alert('Veuillez entrer une quantité valide.');\n        }\n      },\n\n      // Fonction de vente d'une crypto\n      vendre(item) {\n        if (item.quantite > 0) {\n          const token = localStorage.getItem('auth_token'); // Récupérer le token depuis localStorage\n          fetch('http://localhost:8081/vente', {\n            method: 'POST',\n            headers: {\n              'Authorization': `Bearer ${token}`,\n              'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            body: new URLSearchParams({\n              crypto_id: item.id,\n              quantite: item.quantite\n            })\n          })\n            .then(response => response.json())\n            .then(data => {\n              if (data.ok) {\n                alert(`Vente de ${item.quantite} ${item.nom} réussie.`);\n              } else {\n                alert('Erreur lors de la vente.');\n              }\n            })\n            .catch(error => console.error('Erreur de vente:', error));\n        } else {\n          alert('Veuillez entrer une quantité valide.');\n        }\n      }\n    }\n  };\n</script>\n\n<style>\n</style>\n"]}]}