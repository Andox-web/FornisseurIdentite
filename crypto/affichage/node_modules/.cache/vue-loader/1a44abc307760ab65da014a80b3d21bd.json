{"remainingRequest":"F:\\Manoa\\vaovao\\ITU\\S5\\Mr Rojo\\examen\\crypto-1\\FornisseurIdentite\\crypto\\affichage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Manoa\\vaovao\\ITU\\S5\\Mr Rojo\\examen\\crypto-1\\FornisseurIdentite\\crypto\\affichage\\src\\pages\\frontoffice\\CoursCrypto.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\Manoa\\vaovao\\ITU\\S5\\Mr Rojo\\examen\\crypto-1\\FornisseurIdentite\\crypto\\affichage\\src\\pages\\frontoffice\\CoursCrypto.vue","mtime":1738956092805},{"path":"F:\\Manoa\\vaovao\\ITU\\S5\\Mr Rojo\\examen\\crypto-1\\FornisseurIdentite\\crypto\\affichage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1737957116215},{"path":"F:\\Manoa\\vaovao\\ITU\\S5\\Mr Rojo\\examen\\crypto-1\\FornisseurIdentite\\crypto\\affichage\\node_modules\\babel-loader\\lib\\index.js","mtime":1737957106813},{"path":"F:\\Manoa\\vaovao\\ITU\\S5\\Mr Rojo\\examen\\crypto-1\\FornisseurIdentite\\crypto\\affichage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1737957116215},{"path":"F:\\Manoa\\vaovao\\ITU\\S5\\Mr Rojo\\examen\\crypto-1\\FornisseurIdentite\\crypto\\affichage\\node_modules\\vue-loader\\lib\\index.js","mtime":1737957107578}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBDaGFydENhcmQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ2FyZHMvQ2hhcnRDYXJkLnZ1ZSc7CmltcG9ydCBMVGFibGUgZnJvbSAnc3JjL2NvbXBvbmVudHMvVGFibGUudnVlJzsKaW1wb3J0IENhcmQgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9DYXJkcy9DYXJkLnZ1ZSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgTFRhYmxlLAogICAgQ2hhcnRDYXJkLAogICAgQ2FyZAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlbGVjdGVkQ3J5cHRvOiAxLAogICAgICBjcnlwdG9zOiBbXSwKICAgICAgbGluZUNoYXJ0OiB7CiAgICAgICAgZGF0YTogewogICAgICAgICAgbGFiZWxzOiBbXSwKICAgICAgICAgIHNlcmllczogewogICAgICAgICAgICB0ZXN0OiBbMTAwMDAsIDEyMDAwLCAxMzAwMCwgMTQwMDAsIDE1MDAwLCAxNjAwMCwgMTcwMDAsIDE4MDAwXQogICAgICAgICAgICAvLyAyOiBbMjAwMDAsIDMwMDAwLCA0MDAwMCwgNTAwMDAsIDYwMDAwLCA3MDAwMCwgODAwMDAsIDkwMDAwXSwKICAgICAgICAgICAgLy8gMzogWzIzMDAwLCAyNDAwMCwgMjUwMDAsIDI2MDAwLCAyNzAwMCwgMjgwMDAsIDI5MDAwLCAyMTAwMDBdCiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBvcHRpb25zOiB7CiAgICAgICAgICBsb3c6IDAsCiAgICAgICAgICBoaWdoOiA4MDAwMCwKICAgICAgICAgIHNob3dBcmVhOiBmYWxzZSwKICAgICAgICAgIGhlaWdodDogJzI0NXB4JywKICAgICAgICAgIGF4aXNYOiB7CiAgICAgICAgICAgIHNob3dHcmlkOiBmYWxzZQogICAgICAgICAgfSwKICAgICAgICAgIGxpbmVTbW9vdGg6IHRydWUsCiAgICAgICAgICBzaG93TGluZTogdHJ1ZSwKICAgICAgICAgIHNob3dQb2ludDogdHJ1ZSwKICAgICAgICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgICAgICAgIGNoYXJ0UGFkZGluZzogewogICAgICAgICAgICByaWdodDogNTAKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICB9LAogICAgICB0YWJsZURhdGE6IHsKICAgICAgICBkYXRhOiBbXSwKICAgICAgICBjb2x1bW5zOiBbJ05vbScsICdQcml4J10KICAgICAgfSwKICAgICAgaW50ZXJ2YWw6IG51bGwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgZmlsdGVyZWRDaGFydERhdGEoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgbGFiZWxzOiB0aGlzLmxpbmVDaGFydC5kYXRhLmxhYmVscywKICAgICAgICBzZXJpZXM6IFt0aGlzLmxpbmVDaGFydC5kYXRhLnNlcmllcy50ZXN0IHx8IFtdXQogICAgICB9OwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGFzeW5jIHNlbGVjdGVkQ3J5cHRvKG5ld1ZhbCkgewogICAgICBpZiAobmV3VmFsKSB7CiAgICAgICAgYXdhaXQgdGhpcy5mZXRjaENvdXJzKCk7CiAgICAgIH0KICAgIH0KICB9LAoKICBtZXRob2RzOiB7CiAgICBhc3luYyBmZXRjaENyeXB0b3MoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDo4MDgxL2NyeXB0b3MnKTsKICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgICAgIHRoaXMuY3J5cHRvcyA9IGRhdGEubWFwKGMgPT4gYyk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcigiRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIGNyeXB0b3MiLCBlcnJvcik7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBmZXRjaENvdXJzKCkgewogICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRDcnlwdG8pIHJldHVybjsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRDcnlwdG87CiAgICAgICAgY29uc29sZS5sb2coc2VsZWN0ZWQpOwogICAgICAgIGlmICghc2VsZWN0ZWQpIHJldHVybjsKICAgICAgICBjb25zb2xlLmxvZygiZmV0Y2hpbmcgY291cnMgLiIpOwoKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwOi8vbG9jYWxob3N0OjgwODEvY3J5cHRvcy9jb3Vycz9pZD0ke3NlbGVjdGVkfWApOwogICAgICAgIAogICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7CiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgLy8gdGhpcy5saW5lQ2hhcnQuZGF0YS5zZXJpZXMgPSBkYXRhLm1hcChkID0+IGQudmFsZXVyKTsKICAgICAgICAvLyB0aGlzLmxpbmVDaGFydC5kYXRhLnNlcmllcyA9IFtkYXRhLm1hcChkID0+IGQudmFsZXVyKV07CiAgICAgICAgdGhpcy5saW5lQ2hhcnQuZGF0YS5zZXJpZXMudGVzdCA9IGRhdGEubWFwKGQgPT4gZC52YWxldXIpOwoKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkdSBjb3VycyIsIGVycm9yKTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGZldGNoUHJpeCgpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjgwODEvY3J5cHRvcy9wcml4Jyk7CiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgICAgICB0aGlzLnRhYmxlRGF0YS5kYXRhID0gZGF0YS5tYXAoaXRlbSA9PiAoewogICAgICAgICAgbm9tOiBpdGVtLmNyeXB0b21vbm5haWUubm9tLAogICAgICAgICAgcHJpeDogaXRlbS52YWxldXIKICAgICAgICB9KSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcigiRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIHByaXgiLCBlcnJvcik7CiAgICAgIH0KICAgIH0sCiAgICBzdGFydEF1dG9SZWZyZXNoKCkgewogICAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoIGFzeW5jKCkgPT4gewogICAgICAgYXdhaXQgdGhpcy5mZXRjaENvdXJzKCk7CiAgICAgICBhd2FpdCB0aGlzLmZldGNoUHJpeCgpOwogICAgICB9LCAxMDAwMCk7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5mZXRjaENyeXB0b3MoKS50aGVuKGFzeW5jICgpID0+IHsKICAgICAgYXdhaXQgdGhpcy5mZXRjaENvdXJzKCk7CiAgICAgIGF3YWl0IHRoaXMuZmV0Y2hQcml4KCk7CiAgICAgIGF3YWl0IHRoaXMuc3RhcnRBdXRvUmVmcmVzaCgpOwogICAgfSk7CiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgaWYgKHRoaXMuaW50ZXJ2YWwpIHsKICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["CoursCrypto.vue"],"names":[],"mappings":";AAiEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CoursCrypto.vue","sourceRoot":"src/pages/frontoffice","sourcesContent":["<template>\n  <div class=\"content\">\n    <div class=\"container-fluid\">\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n          <div class=\"crypto-selector\">\n            <label for=\"cryptoSelect\">Sélectionner une crypto :</label>\n            <select v-model=\"selectedCrypto\" id=\"cryptoSelect\">\n              <option v-for=\"crypto in cryptos\" :key=\"crypto.id\" :value=\"crypto.id\">\n                {{ crypto.nom }}\n              </option>\n            </select>\n          </div>\n\n          <chart-card \n            :chart-data=\"filteredChartData\"\n            :chart-options=\"lineChart.options\"\n            :responsive-options=\"lineChart.responsiveOptions\"\n          >\n            <template slot=\"header\">\n              <h4 class=\"card-title\" v-if=\"selectedCrypto\">{{ selectedCrypto }} Chart</h4>\n              <p class=\"card-category\">24 Hours performance</p>\n            </template>\n            <template slot=\"footer\">\n              <!-- <div class=\"legend\">\n                <i class=\"fa fa-circle text-info\"></i> Bitcoin\n                <i class=\"fa fa-circle text-danger\"></i> Ethereum\n                <i class=\"fa fa-circle text-warning\"></i> BNB\n              </div> -->\n              <hr>\n              <div class=\"stats\">\n                <i class=\"fa fa-history\"></i> Updated 10 seconds ago\n              </div>\n            </template>\n          </chart-card>\n        </div>\n      </div>\n\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n          <card>\n            <template slot=\"header\">\n              <h5 class=\"title\">Prix crypto actuel</h5>\n              <p class=\"category\">Mise à jour toutes les 10s</p>\n            </template>\n            <l-table :data=\"tableData.data\" :columns=\"tableData.columns\">\n              <template slot-scope=\"{ row }\">\n                <td>{{ row.nom }}</td>\n                <td>{{ row.prix }} $</td>\n              </template>\n            </l-table>\n            <div class=\"footer\">\n              <hr>\n              <div class=\"stats\">\n                <i class=\"fa fa-history\"></i> Updated 10 seconds ago\n              </div>\n            </div>\n          </card>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ChartCard from 'src/components/Cards/ChartCard.vue';\nimport LTable from 'src/components/Table.vue';\nimport Card from '../../components/Cards/Card.vue';\n\nexport default {\n  components: {\n    LTable,\n    ChartCard,\n    Card\n  },\n  data() {\n    return {\n      selectedCrypto: 1,\n      cryptos: [],\n      lineChart: {\n        data: {\n          labels: [],\n          series: {\n            test: [10000, 12000, 13000, 14000, 15000, 16000, 17000, 18000]\n            // 2: [20000, 30000, 40000, 50000, 60000, 70000, 80000, 90000],\n            // 3: [23000, 24000, 25000, 26000, 27000, 28000, 29000, 210000]\n          }\n        },\n        options: {\n          low: 0,\n          high: 80000,\n          showArea: false,\n          height: '245px',\n          axisX: {\n            showGrid: false\n          },\n          lineSmooth: true,\n          showLine: true,\n          showPoint: true,\n          fullWidth: true,\n          chartPadding: {\n            right: 50\n          }\n        },\n      },\n      tableData: {\n        data: [],\n        columns: ['Nom', 'Prix']\n      },\n      interval: null\n    };\n  },\n  computed: {\n    filteredChartData() {\n      return {\n        labels: this.lineChart.data.labels,\n        series: [this.lineChart.data.series.test || []]\n      };\n    }\n  },\n  watch: {\n    async selectedCrypto(newVal) {\n      if (newVal) {\n        await this.fetchCours();\n      }\n    }\n  },\n\n  methods: {\n    async fetchCryptos() {\n      try {\n        const response = await fetch('http://localhost:8081/cryptos');\n        const data = await response.json();\n        this.cryptos = data.map(c => c);\n      } catch (error) {\n        console.error(\"Erreur lors de la récupération des cryptos\", error);\n      }\n    },\n    async fetchCours() {\n      if (!this.selectedCrypto) return;\n      try {\n        const selected = this.selectedCrypto;\n        console.log(selected);\n        if (!selected) return;\n        console.log(\"fetching cours .\");\n\n        const response = await fetch(`http://localhost:8081/cryptos/cours?id=${selected}`);\n        \n        const data = await response.json();\n        console.log(data);\n        // this.lineChart.data.series = data.map(d => d.valeur);\n        // this.lineChart.data.series = [data.map(d => d.valeur)];\n        this.lineChart.data.series.test = data.map(d => d.valeur);\n\n      } catch (error) {\n        console.error(\"Erreur lors de la récupération du cours\", error);\n      }\n    },\n    async fetchPrix() {\n      try {\n        const response = await fetch('http://localhost:8081/cryptos/prix');\n        const data = await response.json();\n        this.tableData.data = data.map(item => ({\n          nom: item.cryptomonnaie.nom,\n          prix: item.valeur\n        }));\n      } catch (error) {\n        console.error(\"Erreur lors de la récupération des prix\", error);\n      }\n    },\n    startAutoRefresh() {\n      this.interval = setInterval( async() => {\n       await this.fetchCours();\n       await this.fetchPrix();\n      }, 10000);\n    }\n  },\n  mounted() {\n    this.fetchCryptos().then(async () => {\n      await this.fetchCours();\n      await this.fetchPrix();\n      await this.startAutoRefresh();\n    });\n  },\n  beforeDestroy() {\n    if (this.interval) {\n      clearInterval(this.interval);\n    }\n  }\n};\n</script>\n\n\n<style>\n.crypto-selector {\n  margin-bottom: 15px;\n}\n\n.crypto-selector label {\n  margin-right: 10px;\n  font-weight: bold;\n}\n\n.crypto-selector select {\n  padding: 5px;\n  font-size: 14px;\n  border-radius: 4px;\n  border: 1px solid #ccc;\n}\n</style>\n"]}]}