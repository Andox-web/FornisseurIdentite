{"remainingRequest":"C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\src\\pages\\frontoffice\\Annonce.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\src\\pages\\frontoffice\\Annonce.vue","mtime":1739047233234},{"path":"C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1737957116215},{"path":"C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\node_modules\\babel-loader\\lib\\index.js","mtime":1737957106813},{"path":"C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1737957116215},{"path":"C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\node_modules\\vue-loader\\lib\\index.js","mtime":1737957107578}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIGltcG9ydCBDYXJkIGZyb20gJ3NyYy9jb21wb25lbnRzL0NhcmRzL0NhcmQudnVlJw0KDQogIGV4cG9ydCBkZWZhdWx0IHsNCiAgICBjb21wb25lbnRzOiB7DQogICAgICBDYXJkDQogICAgfSwNCiAgICBkYXRhKCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgdGFibGVEYXRhOiBbXQ0KICAgICAgfTsNCiAgICB9LA0KICAgIG1vdW50ZWQoKSB7DQogICAgICB0aGlzLmdldENyeXB0b3MoKTsNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgIC8vIEZvbmN0aW9uIHBvdXIgcsOpY3Vww6lyZXIgbGVzIGNyeXB0b21vbm5haWVzIGRlcHVpcyBsJ0FQSQ0KICAgICAgZ2V0Q3J5cHRvcygpIHsNCiAgICAgICAgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9jcnlwdG9zL3ByaXgnKQ0KICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkNCiAgICAgICAgICAudGhlbihkYXRhID0+IHsNCiAgICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gZGF0YS5tYXAoY3J5cHRvID0+ICh7DQogICAgICAgICAgICAgIGlkOiBjcnlwdG8uY3J5cHRvbW9ubmFpZS5pZCwNCiAgICAgICAgICAgICAgbm9tOiBjcnlwdG8uY3J5cHRvbW9ubmFpZS5ub20sDQogICAgICAgICAgICAgIHByaXg6IGNyeXB0by52YWxldXIsIC8vIEV4ZW1wbGUgZGUgcHJpeCBwb3VyIGNoYXF1ZSBjcnlwdG8gKMOgIGFkYXB0ZXIgc2Vsb24gbGVzIGRvbm7DqWVzKQ0KICAgICAgICAgICAgICBxdWFudGl0ZTogMA0KICAgICAgICAgICAgfSkpOw0KICAgICAgICAgIH0pDQogICAgICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyBjcnlwdG9zOicsIGVycm9yKSk7DQogICAgICB9LA0KDQogICAgICAvLyBGb25jdGlvbiBkJ2FjaGF0IGQndW5lIGNyeXB0bw0KICAgICAgYWNoZXRlcihpdGVtKSB7DQogICAgICAgIGlmIChpdGVtLnF1YW50aXRlID4gMCkgew0KICAgICAgICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F1dGhfdG9rZW4nKTsgLy8gUsOpY3Vww6lyZXIgbGUgdG9rZW4gZGVwdWlzIGxvY2FsU3RvcmFnZQ0KICAgICAgICAgIGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjgwODEvYWNoYXQnLCB7DQogICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dG9rZW59YCwNCiAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgYm9keTogbmV3IFVSTFNlYXJjaFBhcmFtcyh7DQogICAgICAgICAgICAgIGNyeXB0b19pZDogaXRlbS5pZCwNCiAgICAgICAgICAgICAgcXVhbnRpdGU6IGl0ZW0ucXVhbnRpdGUNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfSkNCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkNCiAgICAgICAgICAgIC50aGVuKGRhdGEgPT4gew0KICAgICAgICAgICAgICBpZiAoZGF0YS5vaykgew0KICAgICAgICAgICAgICAgIGFsZXJ0KGBBY2hhdCBkZSAke2l0ZW0ucXVhbnRpdGV9ICR7aXRlbS5ub219IHLDqXVzc2kuYCk7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgYWxlcnQoJ0VycmV1ciBsb3JzIGRlIGxcJ2FjaGF0LicpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBkXCdhY2hhdDonLCBlcnJvcikpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGFsZXJ0KCdWZXVpbGxleiBlbnRyZXIgdW5lIHF1YW50aXTDqSB2YWxpZGUuJyk7DQogICAgICAgIH0NCiAgICAgIH0sDQoNCiAgICAgIC8vIEZvbmN0aW9uIGRlIHZlbnRlIGQndW5lIGNyeXB0bw0KICAgICAgdmVuZHJlKGl0ZW0pIHsNCiAgICAgICAgaWYgKGl0ZW0ucXVhbnRpdGUgPiAwKSB7DQogICAgICAgICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0aF90b2tlbicpOyAvLyBSw6ljdXDDqXJlciBsZSB0b2tlbiBkZXB1aXMgbG9jYWxTdG9yYWdlDQogICAgICAgICAgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MS92ZW50ZScsIHsNCiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gLA0KICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBib2R5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHsNCiAgICAgICAgICAgICAgY3J5cHRvX2lkOiBpdGVtLmlkLA0KICAgICAgICAgICAgICBxdWFudGl0ZTogaXRlbS5xdWFudGl0ZQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9KQ0KICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKQ0KICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgICAgIGlmIChkYXRhLm9rKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoYFZlbnRlIGRlICR7aXRlbS5xdWFudGl0ZX0gJHtpdGVtLm5vbX0gcsOpdXNzaWUuYCk7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgYWxlcnQoJ0VycmV1ciBsb3JzIGRlIGxhIHZlbnRlLicpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBkZSB2ZW50ZTonLCBlcnJvcikpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGFsZXJ0KCdWZXVpbGxleiBlbnRyZXIgdW5lIHF1YW50aXTDqSB2YWxpZGUuJyk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH07DQo="},{"version":3,"sources":["Annonce.vue"],"names":[],"mappings":";AA+CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Annonce.vue","sourceRoot":"src/pages/frontoffice","sourcesContent":["<template>\r\n  <div class=\"content\">\r\n    <div class=\"container-fluid\">\r\n      <div class=\"row\">\r\n        <div class=\"col-12\">\r\n          <card class=\"strpied-tabled-with-hover\"\r\n                body-classes=\"table-full-width table-responsive\"\r\n          >\r\n            <template slot=\"header\">\r\n              <h4 class=\"card-title\">Achat/vente cryptomonnaie</h4>\r\n              <p class=\"card-category\">Liste des cryptos </p>\r\n            </template>\r\n            <table class=\"table table-hover table-striped\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Crypto</th>\r\n                  <th>Prix</th>\r\n                  <th>Quantité</th>\r\n                  <th>Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"(item, index) in tableData\" :key=\"item.id\">\r\n                  <td>{{ item.nom }}</td>\r\n                  <td>{{ item.prix }}</td>\r\n                  <td>\r\n                    <input type=\"number\"\r\n                           v-model=\"item.quantite\"\r\n                           min=\"0\"\r\n                           :placeholder=\"'Quantité'\"\r\n                           class=\"form-control\" />\r\n                  </td>\r\n                  <td>\r\n                    <button @click=\"acheter(item)\" class=\"btn btn-primary\">Acheter</button>\r\n                    <button @click=\"vendre(item)\" class=\"btn btn-danger\">Vendre</button>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </card>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Card from 'src/components/Cards/Card.vue'\r\n\r\n  export default {\r\n    components: {\r\n      Card\r\n    },\r\n    data() {\r\n      return {\r\n        tableData: []\r\n      };\r\n    },\r\n    mounted() {\r\n      this.getCryptos();\r\n    },\r\n    methods: {\r\n      // Fonction pour récupérer les cryptomonnaies depuis l'API\r\n      getCryptos() {\r\n        fetch('http://localhost:8081/cryptos/prix')\r\n          .then(response => response.json())\r\n          .then(data => {\r\n            this.tableData = data.map(crypto => ({\r\n              id: crypto.cryptomonnaie.id,\r\n              nom: crypto.cryptomonnaie.nom,\r\n              prix: crypto.valeur, // Exemple de prix pour chaque crypto (à adapter selon les données)\r\n              quantite: 0\r\n            }));\r\n          })\r\n          .catch(error => console.error('Erreur lors de la récupération des cryptos:', error));\r\n      },\r\n\r\n      // Fonction d'achat d'une crypto\r\n      acheter(item) {\r\n        if (item.quantite > 0) {\r\n          const token = localStorage.getItem('auth_token'); // Récupérer le token depuis localStorage\r\n          fetch('http://localhost:8081/achat', {\r\n            method: 'POST',\r\n            headers: {\r\n              'Authorization': `Bearer ${token}`,\r\n              'Content-Type': 'application/x-www-form-urlencoded'\r\n            },\r\n            body: new URLSearchParams({\r\n              crypto_id: item.id,\r\n              quantite: item.quantite\r\n            })\r\n          })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n              if (data.ok) {\r\n                alert(`Achat de ${item.quantite} ${item.nom} réussi.`);\r\n              } else {\r\n                alert('Erreur lors de l\\'achat.');\r\n              }\r\n            })\r\n            .catch(error => console.error('Erreur d\\'achat:', error));\r\n        } else {\r\n          alert('Veuillez entrer une quantité valide.');\r\n        }\r\n      },\r\n\r\n      // Fonction de vente d'une crypto\r\n      vendre(item) {\r\n        if (item.quantite > 0) {\r\n          const token = localStorage.getItem('auth_token'); // Récupérer le token depuis localStorage\r\n          fetch('http://localhost:8081/vente', {\r\n            method: 'POST',\r\n            headers: {\r\n              'Authorization': `Bearer ${token}`,\r\n              'Content-Type': 'application/x-www-form-urlencoded'\r\n            },\r\n            body: new URLSearchParams({\r\n              crypto_id: item.id,\r\n              quantite: item.quantite\r\n            })\r\n          })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n              if (data.ok) {\r\n                alert(`Vente de ${item.quantite} ${item.nom} réussie.`);\r\n              } else {\r\n                alert('Erreur lors de la vente.');\r\n              }\r\n            })\r\n            .catch(error => console.error('Erreur de vente:', error));\r\n        } else {\r\n          alert('Veuillez entrer une quantité valide.');\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"]}]}