{"remainingRequest":"F:\\Manoa\\vaovao\\ITU\\S5\\Mr Rojo\\examen\\crypto-1\\FornisseurIdentite\\crypto\\affichage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Manoa\\vaovao\\ITU\\S5\\Mr Rojo\\examen\\crypto-1\\FornisseurIdentite\\crypto\\affichage\\src\\pages\\frontoffice\\Portefeuille.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\Manoa\\vaovao\\ITU\\S5\\Mr Rojo\\examen\\crypto-1\\FornisseurIdentite\\crypto\\affichage\\src\\pages\\frontoffice\\Portefeuille.vue","mtime":1738851915550},{"path":"F:\\Manoa\\vaovao\\ITU\\S5\\Mr Rojo\\examen\\crypto-1\\FornisseurIdentite\\crypto\\affichage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1737957116215},{"path":"F:\\Manoa\\vaovao\\ITU\\S5\\Mr Rojo\\examen\\crypto-1\\FornisseurIdentite\\crypto\\affichage\\node_modules\\babel-loader\\lib\\index.js","mtime":1737957106813},{"path":"F:\\Manoa\\vaovao\\ITU\\S5\\Mr Rojo\\examen\\crypto-1\\FornisseurIdentite\\crypto\\affichage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1737957116215},{"path":"F:\\Manoa\\vaovao\\ITU\\S5\\Mr Rojo\\examen\\crypto-1\\FornisseurIdentite\\crypto\\affichage\\node_modules\\vue-loader\\lib\\index.js","mtime":1737957107578}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgaW1wb3J0IExUYWJsZSBmcm9tICdzcmMvY29tcG9uZW50cy9UYWJsZS52dWUnCiAgaW1wb3J0IENhcmQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ2FyZHMvQ2FyZC52dWUnCgogIGNvbnN0IHRhYmxlQ29sdW1ucyA9IFsnSWQnLCAnY3J5cHRvJywgJ3ByaXgnLCAncXVhbnRpdGUnXQogIGNvbnN0IHRhYmxlQ29sdW1uc0ZpYXQgPSBbJ0lkJywgJ2RldmlzJywgJ3F1YW50aXRlJ10KCiAgZXhwb3J0IGRlZmF1bHQgewogICAgY29tcG9uZW50czogewogICAgICBMVGFibGUsCiAgICAgIENhcmQKICAgIH0sCiAgICBkYXRhKCkgewogICAgICByZXR1cm4gewogICAgICAgIHRhYmxlMTogewogICAgICAgICAgY29sdW1uczogWy4uLnRhYmxlQ29sdW1uc10sCiAgICAgICAgICBkYXRhOiBbXQogICAgICAgIH0sCiAgICAgICAgdGFibGUyOiB7CiAgICAgICAgICBjb2x1bW5zOiBbLi4udGFibGVDb2x1bW5zRmlhdF0sCiAgICAgICAgICBkYXRhOiBbXQogICAgICAgIH0sCiAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAnJywKICAgICAgICBhbW91bnQ6ICcnCiAgICAgIH07CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAvLyBNw6l0aG9kZSBwb3VyIHNvdW1ldHRyZSBsYSBkZW1hbmRlCiAgICAgIHN1Ym1pdFJlcXVlc3QoKSB7CiAgICAgICAgYWxlcnQoYERlbWFuZGUgZGUgJHt0aGlzLnRyYW5zYWN0aW9uVHlwZX0gZGUgJHt0aGlzLmFtb3VudH0gZW52b3nDqWUuYCk7CiAgICAgIH0sCgogICAgICAvLyBNw6l0aG9kZSBwb3VyIHLDqWN1cMOpcmVyIGxlcyBkb25uw6llcyBkZSBsJ0FQSQogICAgICBhc3luYyBmZXRjaFBvcnRlZmV1aWxsZSgpIHsKICAgICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRoX3Rva2VuJyk7CiAgICAgICAgaWYgKCF0b2tlbikgewogICAgICAgICAgYWxlcnQoIlRva2VuIGludHJvdXZhYmxlIGRhbnMgbGUgbG9jYWxTdG9yYWdlIik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB0cnkgewogICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDo4MDgxL3BvcnRlZmV1aWxsZScsIHsKICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2VufWAKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VycmV1ciBkZSByw6ljdXDDqXJhdGlvbiBkZXMgZG9ubsOpZXMnKTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgIC8vIEFmZmVjdGF0aW9uIGRlcyBkb25uw6llcyBkYW5zIGxlcyB0YWJsZWF1eAogICAgICAgICAgdGhpcy50YWJsZTEuZGF0YSA9IGRhdGEucG9ydGVmZXVpbGxlX2NyeXB0by5tYXAoaXRlbSA9PiAoewogICAgICAgICAgICBpZDogaXRlbS5pZCwKICAgICAgICAgICAgY3J5cHRvOiBpdGVtLmNyeXB0b21vbm5haWUubm9tLAogICAgICAgICAgICBwcml4OiBgJCR7aXRlbS5xdWFudGl0ZS50b0ZpeGVkKDIpfWAsCiAgICAgICAgICAgIHF1YW50aXRlOiBpdGVtLnF1YW50aXRlCiAgICAgICAgICB9KSk7CgogICAgICAgICAgdGhpcy50YWJsZTIuZGF0YSA9IGRhdGEucG9ydGVmZXVpbGxlX2ZpYXQubWFwKGl0ZW0gPT4gKHsKICAgICAgICAgICAgaWQ6IGl0ZW0uaWQsCiAgICAgICAgICAgIGRldmlzOiBpdGVtLnV0aWxpc2F0ZXVyLm5vbSwgIC8vIE91IGF1dHJlIGF0dHJpYnV0IHBlcnRpbmVudCBkZSBsJ3V0aWxpc2F0ZXVyCiAgICAgICAgICAgIHF1YW50aXRlOiBgJCR7aXRlbS5xdWFudGl0ZS50b0ZpeGVkKDIpfWAKICAgICAgICAgIH0pKTsKCiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyBkb25uw6llcyA6IiwgZXJyb3IpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgIHRoaXMuZmV0Y2hQb3J0ZWZldWlsbGUoKTsKICAgIH0KICB9Cg=="},{"version":3,"sources":["Portefeuille.vue"],"names":[],"mappings":";AA6DA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Portefeuille.vue","sourceRoot":"src/pages/frontoffice","sourcesContent":["<template>\n  <div class=\"content\">\n    <div class=\"container-fluid\">\n      <div class=\"row\">\n        <div class=\"col-12\">\n          <card class=\"strpied-tabled-with-hover\"\n                body-classes=\"table-full-width table-responsive\"\n          >\n            <template slot=\"header\">\n              <h4 class=\"card-title\">Portefeuille crypto</h4>\n              <p class=\"card-category\"></p>\n            </template>\n            <l-table class=\"table-hover table-striped\"\n                     :columns=\"table1.columns\"\n                     :data=\"table1.data\"\n                     @button-clicked=\"handleButtonClick\">\n            </l-table>\n          </card>\n        </div>\n\n        <div class=\"col-12\">\n          <card class=\"card-plain\">\n            <template slot=\"header\">\n              <h4 class=\"card-title\">Portefeuille Fiat</h4>\n              <p class=\"card-category\">Vous pouvez les échanger contre des cryptos</p>\n            </template>\n            <div class=\"table-responsive\">\n              <l-table class=\"table-hover\"\n                       :columns=\"table2.columns\"\n                       :data=\"table2.data\">\n              </l-table>\n            </div>\n          </card>\n        </div>\n\n        <div class=\"col-12\">\n          <card class=\"card-body\">\n            <template slot=\"header\">\n              <h4 class=\"card-title\">Demande de retrait/dépôt</h4>\n            </template>\n            <div class=\"form-group\">\n              <label for=\"transactionType\">Type de transaction</label>\n              <select v-model=\"transactionType\" class=\"form-control\">\n                <option value=\"depot\">Dépôt</option>\n                <option value=\"retrait\">Retrait</option>\n              </select>\n            </div>\n            <div class=\"form-group\">\n              <label for=\"amount\">Quantité</label>\n              <input v-model=\"amount\" type=\"number\" class=\"form-control\" placeholder=\"Entrez la quantité\">\n            </div>\n            <button @click=\"submitRequest\" class=\"btn btn-primary\">Envoyer la demande</button>\n          </card>\n        </div>\n\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import LTable from 'src/components/Table.vue'\n  import Card from 'src/components/Cards/Card.vue'\n\n  const tableColumns = ['Id', 'crypto', 'prix', 'quantite']\n  const tableColumnsFiat = ['Id', 'devis', 'quantite']\n\n  export default {\n    components: {\n      LTable,\n      Card\n    },\n    data() {\n      return {\n        table1: {\n          columns: [...tableColumns],\n          data: []\n        },\n        table2: {\n          columns: [...tableColumnsFiat],\n          data: []\n        },\n        transactionType: '',\n        amount: ''\n      };\n    },\n    methods: {\n      // Méthode pour soumettre la demande\n      submitRequest() {\n        alert(`Demande de ${this.transactionType} de ${this.amount} envoyée.`);\n      },\n\n      // Méthode pour récupérer les données de l'API\n      async fetchPortefeuille() {\n        const token = localStorage.getItem('auth_token');\n        if (!token) {\n          alert(\"Token introuvable dans le localStorage\");\n          return;\n        }\n\n        try {\n          const response = await fetch('http://localhost:8081/portefeuille', {\n            method: 'GET',\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n\n          if (!response.ok) {\n            throw new Error('Erreur de récupération des données');\n          }\n\n          const data = await response.json();\n\n          // Affectation des données dans les tableaux\n          this.table1.data = data.portefeuille_crypto.map(item => ({\n            id: item.id,\n            crypto: item.cryptomonnaie.nom,\n            prix: `$${item.quantite.toFixed(2)}`,\n            quantite: item.quantite\n          }));\n\n          this.table2.data = data.portefeuille_fiat.map(item => ({\n            id: item.id,\n            devis: item.utilisateur.nom,  // Ou autre attribut pertinent de l'utilisateur\n            quantite: `$${item.quantite.toFixed(2)}`\n          }));\n\n        } catch (error) {\n          console.error(\"Erreur lors de la récupération des données :\", error);\n        }\n      }\n    },\n    mounted() {\n      this.fetchPortefeuille();\n    }\n  }\n</script>\n\n<style>\n</style>\n"]}]}