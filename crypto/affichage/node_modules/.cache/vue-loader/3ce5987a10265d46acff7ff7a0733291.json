{"remainingRequest":"E:\\dev\\FornisseurIdentite\\crypto\\affichage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\dev\\FornisseurIdentite\\crypto\\affichage\\src\\pages\\frontoffice\\Annonce.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\dev\\FornisseurIdentite\\crypto\\affichage\\src\\pages\\frontoffice\\Annonce.vue","mtime":1739018947617},{"path":"E:\\dev\\FornisseurIdentite\\crypto\\affichage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739020670398},{"path":"E:\\dev\\FornisseurIdentite\\crypto\\affichage\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1739022456732},{"path":"E:\\dev\\FornisseurIdentite\\crypto\\affichage\\node_modules\\babel-loader\\lib\\index.js","mtime":1739020593006},{"path":"E:\\dev\\FornisseurIdentite\\crypto\\affichage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739020670398},{"path":"E:\\dev\\FornisseurIdentite\\crypto\\affichage\\node_modules\\vue-loader\\lib\\index.js","mtime":1739022549058}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIGltcG9ydCBDYXJkIGZyb20gJ3NyYy9jb21wb25lbnRzL0NhcmRzL0NhcmQudnVlJw0KDQogIGV4cG9ydCBkZWZhdWx0IHsNCiAgICBjb21wb25lbnRzOiB7DQogICAgICBDYXJkDQogICAgfSwNCiAgICBkYXRhKCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgdGFibGVEYXRhOiBbXQ0KICAgICAgfTsNCiAgICB9LA0KICAgIG1vdW50ZWQoKSB7DQogICAgICB0aGlzLmdldENyeXB0b3MoKTsNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgIC8vIEZvbmN0aW9uIHBvdXIgcsOpY3Vww6lyZXIgbGVzIGNyeXB0b21vbm5haWVzIGRlcHVpcyBsJ0FQSQ0KICAgICAgZ2V0Q3J5cHRvcygpIHsNCiAgICAgICAgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9jcnlwdG9zJykNCiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpDQogICAgICAgICAgLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IGRhdGEubWFwKGNyeXB0byA9PiAoew0KICAgICAgICAgICAgICBpZDogY3J5cHRvLmlkLA0KICAgICAgICAgICAgICBub206IGNyeXB0by5ub20sDQogICAgICAgICAgICAgIHByaXg6ICckMTAwJywgLy8gRXhlbXBsZSBkZSBwcml4IHBvdXIgY2hhcXVlIGNyeXB0byAow6AgYWRhcHRlciBzZWxvbiBsZXMgZG9ubsOpZXMpDQogICAgICAgICAgICAgIHF1YW50aXRlOiAwDQogICAgICAgICAgICB9KSk7DQogICAgICAgICAgfSkNCiAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIGNyeXB0b3M6JywgZXJyb3IpKTsNCiAgICAgIH0sDQoNCiAgICAgIC8vIEZvbmN0aW9uIGQnYWNoYXQgZCd1bmUgY3J5cHRvDQogICAgICBhY2hldGVyKGl0ZW0pIHsNCiAgICAgICAgaWYgKGl0ZW0ucXVhbnRpdGUgPiAwKSB7DQogICAgICAgICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0aF90b2tlbicpOyAvLyBSw6ljdXDDqXJlciBsZSB0b2tlbiBkZXB1aXMgbG9jYWxTdG9yYWdlDQogICAgICAgICAgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9hY2hhdCcsIHsNCiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gLA0KICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBib2R5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHsNCiAgICAgICAgICAgICAgY3J5cHRvX2lkOiBpdGVtLmlkLA0KICAgICAgICAgICAgICBxdWFudGl0ZTogaXRlbS5xdWFudGl0ZQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9KQ0KICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKQ0KICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgICAgIGlmIChkYXRhLm9rKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoYEFjaGF0IGRlICR7aXRlbS5xdWFudGl0ZX0gJHtpdGVtLm5vbX0gcsOpdXNzaS5gKTsNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBhbGVydCgnRXJyZXVyIGxvcnMgZGUgbFwnYWNoYXQuJyk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5lcnJvcignRXJyZXVyIGRcJ2FjaGF0OicsIGVycm9yKSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgYWxlcnQoJ1ZldWlsbGV6IGVudHJlciB1bmUgcXVhbnRpdMOpIHZhbGlkZS4nKTsNCiAgICAgICAgfQ0KICAgICAgfSwNCg0KICAgICAgLy8gRm9uY3Rpb24gZGUgdmVudGUgZCd1bmUgY3J5cHRvDQogICAgICB2ZW5kcmUoaXRlbSkgew0KICAgICAgICBpZiAoaXRlbS5xdWFudGl0ZSA+IDApIHsNCiAgICAgICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRoX3Rva2VuJyk7IC8vIFLDqWN1cMOpcmVyIGxlIHRva2VuIGRlcHVpcyBsb2NhbFN0b3JhZ2UNCiAgICAgICAgICBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDo4MDgxL3ZlbnRlJywgew0KICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2VufWAsDQogICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGJvZHk6IG5ldyBVUkxTZWFyY2hQYXJhbXMoew0KICAgICAgICAgICAgICBjcnlwdG9faWQ6IGl0ZW0uaWQsDQogICAgICAgICAgICAgIHF1YW50aXRlOiBpdGVtLnF1YW50aXRlDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0pDQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpDQogICAgICAgICAgICAudGhlbihkYXRhID0+IHsNCiAgICAgICAgICAgICAgaWYgKGRhdGEub2spIHsNCiAgICAgICAgICAgICAgICBhbGVydChgVmVudGUgZGUgJHtpdGVtLnF1YW50aXRlfSAke2l0ZW0ubm9tfSByw6l1c3NpZS5gKTsNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBhbGVydCgnRXJyZXVyIGxvcnMgZGUgbGEgdmVudGUuJyk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5lcnJvcignRXJyZXVyIGRlIHZlbnRlOicsIGVycm9yKSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgYWxlcnQoJ1ZldWlsbGV6IGVudHJlciB1bmUgcXVhbnRpdMOpIHZhbGlkZS4nKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfTsNCg=="},{"version":3,"sources":["Annonce.vue"],"names":[],"mappings":";AA+CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Annonce.vue","sourceRoot":"src/pages/frontoffice","sourcesContent":["<template>\r\n  <div class=\"content\">\r\n    <div class=\"container-fluid\">\r\n      <div class=\"row\">\r\n        <div class=\"col-12\">\r\n          <card class=\"strpied-tabled-with-hover\"\r\n                body-classes=\"table-full-width table-responsive\"\r\n          >\r\n            <template slot=\"header\">\r\n              <h4 class=\"card-title\">Annonces disponibles</h4>\r\n              <p class=\"card-category\">Liste des cryptos en vente</p>\r\n            </template>\r\n            <table class=\"table table-hover table-striped\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Crypto</th>\r\n                  <th>Prix</th>\r\n                  <th>Quantité</th>\r\n                  <th>Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"(item, index) in tableData\" :key=\"item.id\">\r\n                  <td>{{ item.nom }}</td>\r\n                  <td>{{ item.prix }}</td>\r\n                  <td>\r\n                    <input type=\"number\"\r\n                           v-model=\"item.quantite\"\r\n                           min=\"0\"\r\n                           :placeholder=\"'Quantité'\"\r\n                           class=\"form-control\" />\r\n                  </td>\r\n                  <td>\r\n                    <button @click=\"acheter(item)\" class=\"btn btn-primary\">Acheter</button>\r\n                    <button @click=\"vendre(item)\" class=\"btn btn-danger\">Vendre</button>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </card>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Card from 'src/components/Cards/Card.vue'\r\n\r\n  export default {\r\n    components: {\r\n      Card\r\n    },\r\n    data() {\r\n      return {\r\n        tableData: []\r\n      };\r\n    },\r\n    mounted() {\r\n      this.getCryptos();\r\n    },\r\n    methods: {\r\n      // Fonction pour récupérer les cryptomonnaies depuis l'API\r\n      getCryptos() {\r\n        fetch('http://localhost:8081/cryptos')\r\n          .then(response => response.json())\r\n          .then(data => {\r\n            this.tableData = data.map(crypto => ({\r\n              id: crypto.id,\r\n              nom: crypto.nom,\r\n              prix: '$100', // Exemple de prix pour chaque crypto (à adapter selon les données)\r\n              quantite: 0\r\n            }));\r\n          })\r\n          .catch(error => console.error('Erreur lors de la récupération des cryptos:', error));\r\n      },\r\n\r\n      // Fonction d'achat d'une crypto\r\n      acheter(item) {\r\n        if (item.quantite > 0) {\r\n          const token = localStorage.getItem('auth_token'); // Récupérer le token depuis localStorage\r\n          fetch('http://localhost:8081/achat', {\r\n            method: 'POST',\r\n            headers: {\r\n              'Authorization': `Bearer ${token}`,\r\n              'Content-Type': 'application/x-www-form-urlencoded'\r\n            },\r\n            body: new URLSearchParams({\r\n              crypto_id: item.id,\r\n              quantite: item.quantite\r\n            })\r\n          })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n              if (data.ok) {\r\n                alert(`Achat de ${item.quantite} ${item.nom} réussi.`);\r\n              } else {\r\n                alert('Erreur lors de l\\'achat.');\r\n              }\r\n            })\r\n            .catch(error => console.error('Erreur d\\'achat:', error));\r\n        } else {\r\n          alert('Veuillez entrer une quantité valide.');\r\n        }\r\n      },\r\n\r\n      // Fonction de vente d'une crypto\r\n      vendre(item) {\r\n        if (item.quantite > 0) {\r\n          const token = localStorage.getItem('auth_token'); // Récupérer le token depuis localStorage\r\n          fetch('http://localhost:8081/vente', {\r\n            method: 'POST',\r\n            headers: {\r\n              'Authorization': `Bearer ${token}`,\r\n              'Content-Type': 'application/x-www-form-urlencoded'\r\n            },\r\n            body: new URLSearchParams({\r\n              crypto_id: item.id,\r\n              quantite: item.quantite\r\n            })\r\n          })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n              if (data.ok) {\r\n                alert(`Vente de ${item.quantite} ${item.nom} réussie.`);\r\n              } else {\r\n                alert('Erreur lors de la vente.');\r\n              }\r\n            })\r\n            .catch(error => console.error('Erreur de vente:', error));\r\n        } else {\r\n          alert('Veuillez entrer une quantité valide.');\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"]}]}