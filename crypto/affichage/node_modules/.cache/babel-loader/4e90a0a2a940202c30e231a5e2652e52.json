{"remainingRequest":"E:\\dev\\FornisseurIdentite\\crypto\\affichage\\node_modules\\thread-loader\\dist\\cjs.js!E:\\dev\\FornisseurIdentite\\crypto\\affichage\\node_modules\\babel-loader\\lib\\index.js!E:\\dev\\FornisseurIdentite\\crypto\\affichage\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\dev\\FornisseurIdentite\\crypto\\affichage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\dev\\FornisseurIdentite\\crypto\\affichage\\src\\pages\\frontoffice\\Annonce.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\dev\\FornisseurIdentite\\crypto\\affichage\\src\\pages\\frontoffice\\Annonce.vue","mtime":1739018947617},{"path":"E:\\dev\\FornisseurIdentite\\crypto\\affichage\\.babelrc","mtime":1739018894935},{"path":"E:\\dev\\FornisseurIdentite\\crypto\\affichage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739020670398},{"path":"E:\\dev\\FornisseurIdentite\\crypto\\affichage\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1739022456732},{"path":"E:\\dev\\FornisseurIdentite\\crypto\\affichage\\node_modules\\babel-loader\\lib\\index.js","mtime":1739020593006},{"path":"E:\\dev\\FornisseurIdentite\\crypto\\affichage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739020670398},{"path":"E:\\dev\\FornisseurIdentite\\crypto\\affichage\\node_modules\\vue-loader\\lib\\index.js","mtime":1739022549058}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IENhcmQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ2FyZHMvQ2FyZC52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQ2FyZDogQ2FyZAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYmxlRGF0YTogW10KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRDcnlwdG9zKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyBGb25jdGlvbiBwb3VyIHLDqWN1cMOpcmVyIGxlcyBjcnlwdG9tb25uYWllcyBkZXB1aXMgbCdBUEkKICAgIGdldENyeXB0b3M6IGZ1bmN0aW9uIGdldENyeXB0b3MoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjgwODEvY3J5cHRvcycpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIF90aGlzLnRhYmxlRGF0YSA9IGRhdGEubWFwKGZ1bmN0aW9uIChjcnlwdG8pIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGlkOiBjcnlwdG8uaWQsCiAgICAgICAgICAgIG5vbTogY3J5cHRvLm5vbSwKICAgICAgICAgICAgcHJpeDogJyQxMDAnLAogICAgICAgICAgICAvLyBFeGVtcGxlIGRlIHByaXggcG91ciBjaGFxdWUgY3J5cHRvICjDoCBhZGFwdGVyIHNlbG9uIGxlcyBkb25uw6llcykKICAgICAgICAgICAgcXVhbnRpdGU6IDAKICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKCdFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgY3J5cHRvczonLCBlcnJvcik7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIEZvbmN0aW9uIGQnYWNoYXQgZCd1bmUgY3J5cHRvCiAgICBhY2hldGVyOiBmdW5jdGlvbiBhY2hldGVyKGl0ZW0pIHsKICAgICAgaWYgKGl0ZW0ucXVhbnRpdGUgPiAwKSB7CiAgICAgICAgdmFyIHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F1dGhfdG9rZW4nKTsgLy8gUsOpY3Vww6lyZXIgbGUgdG9rZW4gZGVwdWlzIGxvY2FsU3RvcmFnZQogICAgICAgIGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjgwODEvYWNoYXQnLCB7CiAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAiQmVhcmVyICIuY29uY2F0KHRva2VuKSwKICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnCiAgICAgICAgICB9LAogICAgICAgICAgYm9keTogbmV3IFVSTFNlYXJjaFBhcmFtcyh7CiAgICAgICAgICAgIGNyeXB0b19pZDogaXRlbS5pZCwKICAgICAgICAgICAgcXVhbnRpdGU6IGl0ZW0ucXVhbnRpdGUKICAgICAgICAgIH0pCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgaWYgKGRhdGEub2spIHsKICAgICAgICAgICAgYWxlcnQoIkFjaGF0IGRlICIuY29uY2F0KGl0ZW0ucXVhbnRpdGUsICIgIikuY29uY2F0KGl0ZW0ubm9tLCAiIHJceEU5dXNzaS4iKSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhbGVydCgnRXJyZXVyIGxvcnMgZGUgbFwnYWNoYXQuJyk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcignRXJyZXVyIGRcJ2FjaGF0OicsIGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhbGVydCgnVmV1aWxsZXogZW50cmVyIHVuZSBxdWFudGl0w6kgdmFsaWRlLicpOwogICAgICB9CiAgICB9LAogICAgLy8gRm9uY3Rpb24gZGUgdmVudGUgZCd1bmUgY3J5cHRvCiAgICB2ZW5kcmU6IGZ1bmN0aW9uIHZlbmRyZShpdGVtKSB7CiAgICAgIGlmIChpdGVtLnF1YW50aXRlID4gMCkgewogICAgICAgIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRoX3Rva2VuJyk7IC8vIFLDqWN1cMOpcmVyIGxlIHRva2VuIGRlcHVpcyBsb2NhbFN0b3JhZ2UKICAgICAgICBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDo4MDgxL3ZlbnRlJywgewogICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogIkJlYXJlciAiLmNvbmNhdCh0b2tlbiksCiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJwogICAgICAgICAgfSwKICAgICAgICAgIGJvZHk6IG5ldyBVUkxTZWFyY2hQYXJhbXMoewogICAgICAgICAgICBjcnlwdG9faWQ6IGl0ZW0uaWQsCiAgICAgICAgICAgIHF1YW50aXRlOiBpdGVtLnF1YW50aXRlCiAgICAgICAgICB9KQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIGlmIChkYXRhLm9rKSB7CiAgICAgICAgICAgIGFsZXJ0KCJWZW50ZSBkZSAiLmNvbmNhdChpdGVtLnF1YW50aXRlLCAiICIpLmNvbmNhdChpdGVtLm5vbSwgIiByXHhFOXVzc2llLiIpKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFsZXJ0KCdFcnJldXIgbG9ycyBkZSBsYSB2ZW50ZS4nKTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKCdFcnJldXIgZGUgdmVudGU6JywgZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGFsZXJ0KCdWZXVpbGxleiBlbnRyZXIgdW5lIHF1YW50aXTDqSB2YWxpZGUuJyk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"names":["Card","components","data","tableData","mounted","getCryptos","methods","_this","fetch","then","response","json","map","crypto","id","nom","prix","quantite","catch","error","console","acheter","item","token","localStorage","getItem","method","headers","concat","body","URLSearchParams","crypto_id","ok","alert","vendre"],"sources":["src/pages/frontoffice/Annonce.vue"],"sourcesContent":["<template>\r\n  <div class=\"content\">\r\n    <div class=\"container-fluid\">\r\n      <div class=\"row\">\r\n        <div class=\"col-12\">\r\n          <card class=\"strpied-tabled-with-hover\"\r\n                body-classes=\"table-full-width table-responsive\"\r\n          >\r\n            <template slot=\"header\">\r\n              <h4 class=\"card-title\">Annonces disponibles</h4>\r\n              <p class=\"card-category\">Liste des cryptos en vente</p>\r\n            </template>\r\n            <table class=\"table table-hover table-striped\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Crypto</th>\r\n                  <th>Prix</th>\r\n                  <th>Quantité</th>\r\n                  <th>Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"(item, index) in tableData\" :key=\"item.id\">\r\n                  <td>{{ item.nom }}</td>\r\n                  <td>{{ item.prix }}</td>\r\n                  <td>\r\n                    <input type=\"number\"\r\n                           v-model=\"item.quantite\"\r\n                           min=\"0\"\r\n                           :placeholder=\"'Quantité'\"\r\n                           class=\"form-control\" />\r\n                  </td>\r\n                  <td>\r\n                    <button @click=\"acheter(item)\" class=\"btn btn-primary\">Acheter</button>\r\n                    <button @click=\"vendre(item)\" class=\"btn btn-danger\">Vendre</button>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </card>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Card from 'src/components/Cards/Card.vue'\r\n\r\n  export default {\r\n    components: {\r\n      Card\r\n    },\r\n    data() {\r\n      return {\r\n        tableData: []\r\n      };\r\n    },\r\n    mounted() {\r\n      this.getCryptos();\r\n    },\r\n    methods: {\r\n      // Fonction pour récupérer les cryptomonnaies depuis l'API\r\n      getCryptos() {\r\n        fetch('http://localhost:8081/cryptos')\r\n          .then(response => response.json())\r\n          .then(data => {\r\n            this.tableData = data.map(crypto => ({\r\n              id: crypto.id,\r\n              nom: crypto.nom,\r\n              prix: '$100', // Exemple de prix pour chaque crypto (à adapter selon les données)\r\n              quantite: 0\r\n            }));\r\n          })\r\n          .catch(error => console.error('Erreur lors de la récupération des cryptos:', error));\r\n      },\r\n\r\n      // Fonction d'achat d'une crypto\r\n      acheter(item) {\r\n        if (item.quantite > 0) {\r\n          const token = localStorage.getItem('auth_token'); // Récupérer le token depuis localStorage\r\n          fetch('http://localhost:8081/achat', {\r\n            method: 'POST',\r\n            headers: {\r\n              'Authorization': `Bearer ${token}`,\r\n              'Content-Type': 'application/x-www-form-urlencoded'\r\n            },\r\n            body: new URLSearchParams({\r\n              crypto_id: item.id,\r\n              quantite: item.quantite\r\n            })\r\n          })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n              if (data.ok) {\r\n                alert(`Achat de ${item.quantite} ${item.nom} réussi.`);\r\n              } else {\r\n                alert('Erreur lors de l\\'achat.');\r\n              }\r\n            })\r\n            .catch(error => console.error('Erreur d\\'achat:', error));\r\n        } else {\r\n          alert('Veuillez entrer une quantité valide.');\r\n        }\r\n      },\r\n\r\n      // Fonction de vente d'une crypto\r\n      vendre(item) {\r\n        if (item.quantite > 0) {\r\n          const token = localStorage.getItem('auth_token'); // Récupérer le token depuis localStorage\r\n          fetch('http://localhost:8081/vente', {\r\n            method: 'POST',\r\n            headers: {\r\n              'Authorization': `Bearer ${token}`,\r\n              'Content-Type': 'application/x-www-form-urlencoded'\r\n            },\r\n            body: new URLSearchParams({\r\n              crypto_id: item.id,\r\n              quantite: item.quantite\r\n            })\r\n          })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n              if (data.ok) {\r\n                alert(`Vente de ${item.quantite} ${item.nom} réussie.`);\r\n              } else {\r\n                alert('Erreur lors de la vente.');\r\n              }\r\n            })\r\n            .catch(error => console.error('Erreur de vente:', error));\r\n        } else {\r\n          alert('Veuillez entrer une quantité valide.');\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"],"mappings":"AA+CA,OAAAA,IAAA;AAEA;EACAC,UAAA;IACAD,IAAA,EAAAA;EACA;EACAE,IAAA,WAAAA,KAAA;IACA;MACAC,SAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,UAAA;EACA;EACAC,OAAA;IACA;IACAD,UAAA,WAAAA,WAAA;MAAA,IAAAE,KAAA;MACAC,KAAA,kCACAC,IAAA,WAAAC,QAAA;QAAA,OAAAA,QAAA,CAAAC,IAAA;MAAA,GACAF,IAAA,WAAAP,IAAA;QACAK,KAAA,CAAAJ,SAAA,GAAAD,IAAA,CAAAU,GAAA,WAAAC,MAAA;UAAA;YACAC,EAAA,EAAAD,MAAA,CAAAC,EAAA;YACAC,GAAA,EAAAF,MAAA,CAAAE,GAAA;YACAC,IAAA;YAAA;YACAC,QAAA;UACA;QAAA;MACA,GACAC,KAAA,WAAAC,KAAA;QAAA,OAAAC,OAAA,CAAAD,KAAA,gDAAAA,KAAA;MAAA;IACA;IAEA;IACAE,OAAA,WAAAA,QAAAC,IAAA;MACA,IAAAA,IAAA,CAAAL,QAAA;QACA,IAAAM,KAAA,GAAAC,YAAA,CAAAC,OAAA;QACAjB,KAAA;UACAkB,MAAA;UACAC,OAAA;YACA,2BAAAC,MAAA,CAAAL,KAAA;YACA;UACA;UACAM,IAAA,MAAAC,eAAA;YACAC,SAAA,EAAAT,IAAA,CAAAR,EAAA;YACAG,QAAA,EAAAK,IAAA,CAAAL;UACA;QACA,GACAR,IAAA,WAAAC,QAAA;UAAA,OAAAA,QAAA,CAAAC,IAAA;QAAA,GACAF,IAAA,WAAAP,IAAA;UACA,IAAAA,IAAA,CAAA8B,EAAA;YACAC,KAAA,aAAAL,MAAA,CAAAN,IAAA,CAAAL,QAAA,OAAAW,MAAA,CAAAN,IAAA,CAAAP,GAAA;UACA;YACAkB,KAAA;UACA;QACA,GACAf,KAAA,WAAAC,KAAA;UAAA,OAAAC,OAAA,CAAAD,KAAA,qBAAAA,KAAA;QAAA;MACA;QACAc,KAAA;MACA;IACA;IAEA;IACAC,MAAA,WAAAA,OAAAZ,IAAA;MACA,IAAAA,IAAA,CAAAL,QAAA;QACA,IAAAM,KAAA,GAAAC,YAAA,CAAAC,OAAA;QACAjB,KAAA;UACAkB,MAAA;UACAC,OAAA;YACA,2BAAAC,MAAA,CAAAL,KAAA;YACA;UACA;UACAM,IAAA,MAAAC,eAAA;YACAC,SAAA,EAAAT,IAAA,CAAAR,EAAA;YACAG,QAAA,EAAAK,IAAA,CAAAL;UACA;QACA,GACAR,IAAA,WAAAC,QAAA;UAAA,OAAAA,QAAA,CAAAC,IAAA;QAAA,GACAF,IAAA,WAAAP,IAAA;UACA,IAAAA,IAAA,CAAA8B,EAAA;YACAC,KAAA,aAAAL,MAAA,CAAAN,IAAA,CAAAL,QAAA,OAAAW,MAAA,CAAAN,IAAA,CAAAP,GAAA;UACA;YACAkB,KAAA;UACA;QACA,GACAf,KAAA,WAAAC,KAAA;UAAA,OAAAC,OAAA,CAAAD,KAAA,qBAAAA,KAAA;QAAA;MACA;QACAc,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}