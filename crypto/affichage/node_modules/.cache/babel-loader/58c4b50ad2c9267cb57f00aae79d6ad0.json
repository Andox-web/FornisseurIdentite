{"remainingRequest":"C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\src\\pages\\frontoffice\\Annonce.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\src\\pages\\frontoffice\\Annonce.vue","mtime":1739047233234},{"path":"C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\.babelrc","mtime":1737956864101},{"path":"C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1737957116215},{"path":"C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\node_modules\\babel-loader\\lib\\index.js","mtime":1737957106813},{"path":"C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1737957116215},{"path":"C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\node_modules\\vue-loader\\lib\\index.js","mtime":1737957107578}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IENhcmQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ2FyZHMvQ2FyZC52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQ2FyZDogQ2FyZAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYmxlRGF0YTogW10KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRDcnlwdG9zKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyBGb25jdGlvbiBwb3VyIHLDqWN1cMOpcmVyIGxlcyBjcnlwdG9tb25uYWllcyBkZXB1aXMgbCdBUEkKICAgIGdldENyeXB0b3M6IGZ1bmN0aW9uIGdldENyeXB0b3MoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjgwODEvY3J5cHRvcy9wcml4JykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgX3RoaXMudGFibGVEYXRhID0gZGF0YS5tYXAoZnVuY3Rpb24gKGNyeXB0bykgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaWQ6IGNyeXB0by5jcnlwdG9tb25uYWllLmlkLAogICAgICAgICAgICBub206IGNyeXB0by5jcnlwdG9tb25uYWllLm5vbSwKICAgICAgICAgICAgcHJpeDogY3J5cHRvLnZhbGV1ciwKICAgICAgICAgICAgLy8gRXhlbXBsZSBkZSBwcml4IHBvdXIgY2hhcXVlIGNyeXB0byAow6AgYWRhcHRlciBzZWxvbiBsZXMgZG9ubsOpZXMpCiAgICAgICAgICAgIHF1YW50aXRlOiAwCiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIGNyeXB0b3M6JywgZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyBGb25jdGlvbiBkJ2FjaGF0IGQndW5lIGNyeXB0bwogICAgYWNoZXRlcjogZnVuY3Rpb24gYWNoZXRlcihpdGVtKSB7CiAgICAgIGlmIChpdGVtLnF1YW50aXRlID4gMCkgewogICAgICAgIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRoX3Rva2VuJyk7IC8vIFLDqWN1cMOpcmVyIGxlIHRva2VuIGRlcHVpcyBsb2NhbFN0b3JhZ2UKICAgICAgICBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDo4MDgxL2FjaGF0JywgewogICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogIkJlYXJlciAiLmNvbmNhdCh0b2tlbiksCiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJwogICAgICAgICAgfSwKICAgICAgICAgIGJvZHk6IG5ldyBVUkxTZWFyY2hQYXJhbXMoewogICAgICAgICAgICBjcnlwdG9faWQ6IGl0ZW0uaWQsCiAgICAgICAgICAgIHF1YW50aXRlOiBpdGVtLnF1YW50aXRlCiAgICAgICAgICB9KQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIGlmIChkYXRhLm9rKSB7CiAgICAgICAgICAgIGFsZXJ0KCJBY2hhdCBkZSAiLmNvbmNhdChpdGVtLnF1YW50aXRlLCAiICIpLmNvbmNhdChpdGVtLm5vbSwgIiByXHhFOXVzc2kuIikpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYWxlcnQoJ0VycmV1ciBsb3JzIGRlIGxcJ2FjaGF0LicpOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBkXCdhY2hhdDonLCBlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWxlcnQoJ1ZldWlsbGV6IGVudHJlciB1bmUgcXVhbnRpdMOpIHZhbGlkZS4nKTsKICAgICAgfQogICAgfSwKICAgIC8vIEZvbmN0aW9uIGRlIHZlbnRlIGQndW5lIGNyeXB0bwogICAgdmVuZHJlOiBmdW5jdGlvbiB2ZW5kcmUoaXRlbSkgewogICAgICBpZiAoaXRlbS5xdWFudGl0ZSA+IDApIHsKICAgICAgICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0aF90b2tlbicpOyAvLyBSw6ljdXDDqXJlciBsZSB0b2tlbiBkZXB1aXMgbG9jYWxTdG9yYWdlCiAgICAgICAgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MS92ZW50ZScsIHsKICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICJCZWFyZXIgIi5jb25jYXQodG9rZW4pLAogICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcKICAgICAgICAgIH0sCiAgICAgICAgICBib2R5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHsKICAgICAgICAgICAgY3J5cHRvX2lkOiBpdGVtLmlkLAogICAgICAgICAgICBxdWFudGl0ZTogaXRlbS5xdWFudGl0ZQogICAgICAgICAgfSkKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICBpZiAoZGF0YS5vaykgewogICAgICAgICAgICBhbGVydCgiVmVudGUgZGUgIi5jb25jYXQoaXRlbS5xdWFudGl0ZSwgIiAiKS5jb25jYXQoaXRlbS5ub20sICIgclx4RTl1c3NpZS4iKSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhbGVydCgnRXJyZXVyIGxvcnMgZGUgbGEgdmVudGUuJyk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcignRXJyZXVyIGRlIHZlbnRlOicsIGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhbGVydCgnVmV1aWxsZXogZW50cmVyIHVuZSBxdWFudGl0w6kgdmFsaWRlLicpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["Card","components","data","tableData","mounted","getCryptos","methods","_this","fetch","then","response","json","map","crypto","id","cryptomonnaie","nom","prix","valeur","quantite","catch","error","console","acheter","item","token","localStorage","getItem","method","headers","concat","body","URLSearchParams","crypto_id","ok","alert","vendre"],"sources":["src/pages/frontoffice/Annonce.vue"],"sourcesContent":["<template>\r\n  <div class=\"content\">\r\n    <div class=\"container-fluid\">\r\n      <div class=\"row\">\r\n        <div class=\"col-12\">\r\n          <card class=\"strpied-tabled-with-hover\"\r\n                body-classes=\"table-full-width table-responsive\"\r\n          >\r\n            <template slot=\"header\">\r\n              <h4 class=\"card-title\">Achat/vente cryptomonnaie</h4>\r\n              <p class=\"card-category\">Liste des cryptos </p>\r\n            </template>\r\n            <table class=\"table table-hover table-striped\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Crypto</th>\r\n                  <th>Prix</th>\r\n                  <th>Quantité</th>\r\n                  <th>Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"(item, index) in tableData\" :key=\"item.id\">\r\n                  <td>{{ item.nom }}</td>\r\n                  <td>{{ item.prix }}</td>\r\n                  <td>\r\n                    <input type=\"number\"\r\n                           v-model=\"item.quantite\"\r\n                           min=\"0\"\r\n                           :placeholder=\"'Quantité'\"\r\n                           class=\"form-control\" />\r\n                  </td>\r\n                  <td>\r\n                    <button @click=\"acheter(item)\" class=\"btn btn-primary\">Acheter</button>\r\n                    <button @click=\"vendre(item)\" class=\"btn btn-danger\">Vendre</button>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </card>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Card from 'src/components/Cards/Card.vue'\r\n\r\n  export default {\r\n    components: {\r\n      Card\r\n    },\r\n    data() {\r\n      return {\r\n        tableData: []\r\n      };\r\n    },\r\n    mounted() {\r\n      this.getCryptos();\r\n    },\r\n    methods: {\r\n      // Fonction pour récupérer les cryptomonnaies depuis l'API\r\n      getCryptos() {\r\n        fetch('http://localhost:8081/cryptos/prix')\r\n          .then(response => response.json())\r\n          .then(data => {\r\n            this.tableData = data.map(crypto => ({\r\n              id: crypto.cryptomonnaie.id,\r\n              nom: crypto.cryptomonnaie.nom,\r\n              prix: crypto.valeur, // Exemple de prix pour chaque crypto (à adapter selon les données)\r\n              quantite: 0\r\n            }));\r\n          })\r\n          .catch(error => console.error('Erreur lors de la récupération des cryptos:', error));\r\n      },\r\n\r\n      // Fonction d'achat d'une crypto\r\n      acheter(item) {\r\n        if (item.quantite > 0) {\r\n          const token = localStorage.getItem('auth_token'); // Récupérer le token depuis localStorage\r\n          fetch('http://localhost:8081/achat', {\r\n            method: 'POST',\r\n            headers: {\r\n              'Authorization': `Bearer ${token}`,\r\n              'Content-Type': 'application/x-www-form-urlencoded'\r\n            },\r\n            body: new URLSearchParams({\r\n              crypto_id: item.id,\r\n              quantite: item.quantite\r\n            })\r\n          })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n              if (data.ok) {\r\n                alert(`Achat de ${item.quantite} ${item.nom} réussi.`);\r\n              } else {\r\n                alert('Erreur lors de l\\'achat.');\r\n              }\r\n            })\r\n            .catch(error => console.error('Erreur d\\'achat:', error));\r\n        } else {\r\n          alert('Veuillez entrer une quantité valide.');\r\n        }\r\n      },\r\n\r\n      // Fonction de vente d'une crypto\r\n      vendre(item) {\r\n        if (item.quantite > 0) {\r\n          const token = localStorage.getItem('auth_token'); // Récupérer le token depuis localStorage\r\n          fetch('http://localhost:8081/vente', {\r\n            method: 'POST',\r\n            headers: {\r\n              'Authorization': `Bearer ${token}`,\r\n              'Content-Type': 'application/x-www-form-urlencoded'\r\n            },\r\n            body: new URLSearchParams({\r\n              crypto_id: item.id,\r\n              quantite: item.quantite\r\n            })\r\n          })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n              if (data.ok) {\r\n                alert(`Vente de ${item.quantite} ${item.nom} réussie.`);\r\n              } else {\r\n                alert('Erreur lors de la vente.');\r\n              }\r\n            })\r\n            .catch(error => console.error('Erreur de vente:', error));\r\n        } else {\r\n          alert('Veuillez entrer une quantité valide.');\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"],"mappings":"AA+CA,OAAAA,IAAA;AAEA;EACAC,UAAA;IACAD,IAAA,EAAAA;EACA;EACAE,IAAA,WAAAA,KAAA;IACA;MACAC,SAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,UAAA;EACA;EACAC,OAAA;IACA;IACAD,UAAA,WAAAA,WAAA;MAAA,IAAAE,KAAA;MACAC,KAAA,uCACAC,IAAA,WAAAC,QAAA;QAAA,OAAAA,QAAA,CAAAC,IAAA;MAAA,GACAF,IAAA,WAAAP,IAAA;QACAK,KAAA,CAAAJ,SAAA,GAAAD,IAAA,CAAAU,GAAA,WAAAC,MAAA;UAAA;YACAC,EAAA,EAAAD,MAAA,CAAAE,aAAA,CAAAD,EAAA;YACAE,GAAA,EAAAH,MAAA,CAAAE,aAAA,CAAAC,GAAA;YACAC,IAAA,EAAAJ,MAAA,CAAAK,MAAA;YAAA;YACAC,QAAA;UACA;QAAA;MACA,GACAC,KAAA,WAAAC,KAAA;QAAA,OAAAC,OAAA,CAAAD,KAAA,gDAAAA,KAAA;MAAA;IACA;IAEA;IACAE,OAAA,WAAAA,QAAAC,IAAA;MACA,IAAAA,IAAA,CAAAL,QAAA;QACA,IAAAM,KAAA,GAAAC,YAAA,CAAAC,OAAA;QACAnB,KAAA;UACAoB,MAAA;UACAC,OAAA;YACA,2BAAAC,MAAA,CAAAL,KAAA;YACA;UACA;UACAM,IAAA,MAAAC,eAAA;YACAC,SAAA,EAAAT,IAAA,CAAAV,EAAA;YACAK,QAAA,EAAAK,IAAA,CAAAL;UACA;QACA,GACAV,IAAA,WAAAC,QAAA;UAAA,OAAAA,QAAA,CAAAC,IAAA;QAAA,GACAF,IAAA,WAAAP,IAAA;UACA,IAAAA,IAAA,CAAAgC,EAAA;YACAC,KAAA,aAAAL,MAAA,CAAAN,IAAA,CAAAL,QAAA,OAAAW,MAAA,CAAAN,IAAA,CAAAR,GAAA;UACA;YACAmB,KAAA;UACA;QACA,GACAf,KAAA,WAAAC,KAAA;UAAA,OAAAC,OAAA,CAAAD,KAAA,qBAAAA,KAAA;QAAA;MACA;QACAc,KAAA;MACA;IACA;IAEA;IACAC,MAAA,WAAAA,OAAAZ,IAAA;MACA,IAAAA,IAAA,CAAAL,QAAA;QACA,IAAAM,KAAA,GAAAC,YAAA,CAAAC,OAAA;QACAnB,KAAA;UACAoB,MAAA;UACAC,OAAA;YACA,2BAAAC,MAAA,CAAAL,KAAA;YACA;UACA;UACAM,IAAA,MAAAC,eAAA;YACAC,SAAA,EAAAT,IAAA,CAAAV,EAAA;YACAK,QAAA,EAAAK,IAAA,CAAAL;UACA;QACA,GACAV,IAAA,WAAAC,QAAA;UAAA,OAAAA,QAAA,CAAAC,IAAA;QAAA,GACAF,IAAA,WAAAP,IAAA;UACA,IAAAA,IAAA,CAAAgC,EAAA;YACAC,KAAA,aAAAL,MAAA,CAAAN,IAAA,CAAAL,QAAA,OAAAW,MAAA,CAAAN,IAAA,CAAAR,GAAA;UACA;YACAmB,KAAA;UACA;QACA,GACAf,KAAA,WAAAC,KAAA;UAAA,OAAAC,OAAA,CAAAD,KAAA,qBAAAA,KAAA;QAAA;MACA;QACAc,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}