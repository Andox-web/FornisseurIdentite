{"remainingRequest":"C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\src\\pages\\frontoffice\\Annonce.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\src\\pages\\frontoffice\\Annonce.vue","mtime":1738859769323},{"path":"C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\.babelrc","mtime":1737956864101},{"path":"C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1737957116215},{"path":"C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1737957113872},{"path":"C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\node_modules\\babel-loader\\lib\\index.js","mtime":1737957106813},{"path":"C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1737957116215},{"path":"C:\\Users\\finoa\\Documents\\GitHub\\FornisseurIdentite\\crypto\\affichage\\node_modules\\vue-loader\\lib\\index.js","mtime":1737957107578}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IENhcmQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ2FyZHMvQ2FyZC52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQ2FyZDogQ2FyZAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYmxlRGF0YTogW10KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRDcnlwdG9zKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyBGb25jdGlvbiBwb3VyIHLDqWN1cMOpcmVyIGxlcyBjcnlwdG9tb25uYWllcyBkZXB1aXMgbCdBUEkKICAgIGdldENyeXB0b3M6IGZ1bmN0aW9uIGdldENyeXB0b3MoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjgwODEvY3J5cHRvcycpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIF90aGlzLnRhYmxlRGF0YSA9IGRhdGEubWFwKGZ1bmN0aW9uIChjcnlwdG8pIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGlkOiBjcnlwdG8uaWQsCiAgICAgICAgICAgIG5vbTogY3J5cHRvLm5vbSwKICAgICAgICAgICAgcHJpeDogJyQxMDAnLAogICAgICAgICAgICAvLyBFeGVtcGxlIGRlIHByaXggcG91ciBjaGFxdWUgY3J5cHRvICjDoCBhZGFwdGVyIHNlbG9uIGxlcyBkb25uw6llcykKICAgICAgICAgICAgcXVhbnRpdGU6IDAKICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKCdFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgY3J5cHRvczonLCBlcnJvcik7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIEZvbmN0aW9uIGQnYWNoYXQgZCd1bmUgY3J5cHRvCiAgICBhY2hldGVyOiBmdW5jdGlvbiBhY2hldGVyKGl0ZW0pIHsKICAgICAgaWYgKGl0ZW0ucXVhbnRpdGUgPiAwKSB7CiAgICAgICAgdmFyIHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F1dGhfdG9rZW4nKTsgLy8gUsOpY3Vww6lyZXIgbGUgdG9rZW4gZGVwdWlzIGxvY2FsU3RvcmFnZQogICAgICAgIGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjgwODEvYWNoYXQnLCB7CiAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAiQmVhcmVyICIuY29uY2F0KHRva2VuKSwKICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnCiAgICAgICAgICB9LAogICAgICAgICAgYm9keTogbmV3IFVSTFNlYXJjaFBhcmFtcyh7CiAgICAgICAgICAgIGNyeXB0b19pZDogaXRlbS5pZCwKICAgICAgICAgICAgcXVhbnRpdGU6IGl0ZW0ucXVhbnRpdGUKICAgICAgICAgIH0pCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgaWYgKGRhdGEub2spIHsKICAgICAgICAgICAgYWxlcnQoIkFjaGF0IGRlICIuY29uY2F0KGl0ZW0ucXVhbnRpdGUsICIgIikuY29uY2F0KGl0ZW0ubm9tLCAiIHJceEU5dXNzaS4iKSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhbGVydCgnRXJyZXVyIGxvcnMgZGUgbFwnYWNoYXQuJyk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcignRXJyZXVyIGRcJ2FjaGF0OicsIGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhbGVydCgnVmV1aWxsZXogZW50cmVyIHVuZSBxdWFudGl0w6kgdmFsaWRlLicpOwogICAgICB9CiAgICB9LAogICAgLy8gRm9uY3Rpb24gZGUgdmVudGUgZCd1bmUgY3J5cHRvCiAgICB2ZW5kcmU6IGZ1bmN0aW9uIHZlbmRyZShpdGVtKSB7CiAgICAgIGlmIChpdGVtLnF1YW50aXRlID4gMCkgewogICAgICAgIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRoX3Rva2VuJyk7IC8vIFLDqWN1cMOpcmVyIGxlIHRva2VuIGRlcHVpcyBsb2NhbFN0b3JhZ2UKICAgICAgICBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDo4MDgxL3ZlbnRlJywgewogICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogIkJlYXJlciAiLmNvbmNhdCh0b2tlbiksCiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJwogICAgICAgICAgfSwKICAgICAgICAgIGJvZHk6IG5ldyBVUkxTZWFyY2hQYXJhbXMoewogICAgICAgICAgICBjcnlwdG9faWQ6IGl0ZW0uaWQsCiAgICAgICAgICAgIHF1YW50aXRlOiBpdGVtLnF1YW50aXRlCiAgICAgICAgICB9KQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIGlmIChkYXRhLm9rKSB7CiAgICAgICAgICAgIGFsZXJ0KCJWZW50ZSBkZSAiLmNvbmNhdChpdGVtLnF1YW50aXRlLCAiICIpLmNvbmNhdChpdGVtLm5vbSwgIiByXHhFOXVzc2llLiIpKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFsZXJ0KCdFcnJldXIgbG9ycyBkZSBsYSB2ZW50ZS4nKTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKCdFcnJldXIgZGUgdmVudGU6JywgZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGFsZXJ0KCdWZXVpbGxleiBlbnRyZXIgdW5lIHF1YW50aXTDqSB2YWxpZGUuJyk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"names":["Card","components","data","tableData","mounted","getCryptos","methods","_this","fetch","then","response","json","map","crypto","id","nom","prix","quantite","catch","error","console","acheter","item","token","localStorage","getItem","method","headers","concat","body","URLSearchParams","crypto_id","ok","alert","vendre"],"sources":["src/pages/frontoffice/Annonce.vue"],"sourcesContent":["<template>\n  <div class=\"content\">\n    <div class=\"container-fluid\">\n      <div class=\"row\">\n        <div class=\"col-12\">\n          <card class=\"strpied-tabled-with-hover\"\n                body-classes=\"table-full-width table-responsive\"\n          >\n            <template slot=\"header\">\n              <h4 class=\"card-title\">Annonces disponibles</h4>\n              <p class=\"card-category\">Liste des cryptos en vente</p>\n            </template>\n            <table class=\"table table-hover table-striped\">\n              <thead>\n                <tr>\n                  <th>Crypto</th>\n                  <th>Prix</th>\n                  <th>Quantité</th>\n                  <th>Action</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"(item, index) in tableData\" :key=\"item.id\">\n                  <td>{{ item.nom }}</td>\n                  <td>{{ item.prix }}</td>\n                  <td>\n                    <input type=\"number\"\n                           v-model=\"item.quantite\"\n                           min=\"0\"\n                           :placeholder=\"'Quantité'\"\n                           class=\"form-control\" />\n                  </td>\n                  <td>\n                    <button @click=\"acheter(item)\" class=\"btn btn-primary\">Acheter</button>\n                    <button @click=\"vendre(item)\" class=\"btn btn-danger\">Vendre</button>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </card>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import Card from 'src/components/Cards/Card.vue'\n\n  export default {\n    components: {\n      Card\n    },\n    data() {\n      return {\n        tableData: []\n      };\n    },\n    mounted() {\n      this.getCryptos();\n    },\n    methods: {\n      // Fonction pour récupérer les cryptomonnaies depuis l'API\n      getCryptos() {\n        fetch('http://localhost:8081/cryptos')\n          .then(response => response.json())\n          .then(data => {\n            this.tableData = data.map(crypto => ({\n              id: crypto.id,\n              nom: crypto.nom,\n              prix: '$100', // Exemple de prix pour chaque crypto (à adapter selon les données)\n              quantite: 0\n            }));\n          })\n          .catch(error => console.error('Erreur lors de la récupération des cryptos:', error));\n      },\n\n      // Fonction d'achat d'une crypto\n      acheter(item) {\n        if (item.quantite > 0) {\n          const token = localStorage.getItem('auth_token'); // Récupérer le token depuis localStorage\n          fetch('http://localhost:8081/achat', {\n            method: 'POST',\n            headers: {\n              'Authorization': `Bearer ${token}`,\n              'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            body: new URLSearchParams({\n              crypto_id: item.id,\n              quantite: item.quantite\n            })\n          })\n            .then(response => response.json())\n            .then(data => {\n              if (data.ok) {\n                alert(`Achat de ${item.quantite} ${item.nom} réussi.`);\n              } else {\n                alert('Erreur lors de l\\'achat.');\n              }\n            })\n            .catch(error => console.error('Erreur d\\'achat:', error));\n        } else {\n          alert('Veuillez entrer une quantité valide.');\n        }\n      },\n\n      // Fonction de vente d'une crypto\n      vendre(item) {\n        if (item.quantite > 0) {\n          const token = localStorage.getItem('auth_token'); // Récupérer le token depuis localStorage\n          fetch('http://localhost:8081/vente', {\n            method: 'POST',\n            headers: {\n              'Authorization': `Bearer ${token}`,\n              'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            body: new URLSearchParams({\n              crypto_id: item.id,\n              quantite: item.quantite\n            })\n          })\n            .then(response => response.json())\n            .then(data => {\n              if (data.ok) {\n                alert(`Vente de ${item.quantite} ${item.nom} réussie.`);\n              } else {\n                alert('Erreur lors de la vente.');\n              }\n            })\n            .catch(error => console.error('Erreur de vente:', error));\n        } else {\n          alert('Veuillez entrer une quantité valide.');\n        }\n      }\n    }\n  };\n</script>\n\n<style>\n</style>\n"],"mappings":"AA+CA,OAAAA,IAAA;AAEA;EACAC,UAAA;IACAD,IAAA,EAAAA;EACA;EACAE,IAAA,WAAAA,KAAA;IACA;MACAC,SAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,UAAA;EACA;EACAC,OAAA;IACA;IACAD,UAAA,WAAAA,WAAA;MAAA,IAAAE,KAAA;MACAC,KAAA,kCACAC,IAAA,WAAAC,QAAA;QAAA,OAAAA,QAAA,CAAAC,IAAA;MAAA,GACAF,IAAA,WAAAP,IAAA;QACAK,KAAA,CAAAJ,SAAA,GAAAD,IAAA,CAAAU,GAAA,WAAAC,MAAA;UAAA;YACAC,EAAA,EAAAD,MAAA,CAAAC,EAAA;YACAC,GAAA,EAAAF,MAAA,CAAAE,GAAA;YACAC,IAAA;YAAA;YACAC,QAAA;UACA;QAAA;MACA,GACAC,KAAA,WAAAC,KAAA;QAAA,OAAAC,OAAA,CAAAD,KAAA,gDAAAA,KAAA;MAAA;IACA;IAEA;IACAE,OAAA,WAAAA,QAAAC,IAAA;MACA,IAAAA,IAAA,CAAAL,QAAA;QACA,IAAAM,KAAA,GAAAC,YAAA,CAAAC,OAAA;QACAjB,KAAA;UACAkB,MAAA;UACAC,OAAA;YACA,2BAAAC,MAAA,CAAAL,KAAA;YACA;UACA;UACAM,IAAA,MAAAC,eAAA;YACAC,SAAA,EAAAT,IAAA,CAAAR,EAAA;YACAG,QAAA,EAAAK,IAAA,CAAAL;UACA;QACA,GACAR,IAAA,WAAAC,QAAA;UAAA,OAAAA,QAAA,CAAAC,IAAA;QAAA,GACAF,IAAA,WAAAP,IAAA;UACA,IAAAA,IAAA,CAAA8B,EAAA;YACAC,KAAA,aAAAL,MAAA,CAAAN,IAAA,CAAAL,QAAA,OAAAW,MAAA,CAAAN,IAAA,CAAAP,GAAA;UACA;YACAkB,KAAA;UACA;QACA,GACAf,KAAA,WAAAC,KAAA;UAAA,OAAAC,OAAA,CAAAD,KAAA,qBAAAA,KAAA;QAAA;MACA;QACAc,KAAA;MACA;IACA;IAEA;IACAC,MAAA,WAAAA,OAAAZ,IAAA;MACA,IAAAA,IAAA,CAAAL,QAAA;QACA,IAAAM,KAAA,GAAAC,YAAA,CAAAC,OAAA;QACAjB,KAAA;UACAkB,MAAA;UACAC,OAAA;YACA,2BAAAC,MAAA,CAAAL,KAAA;YACA;UACA;UACAM,IAAA,MAAAC,eAAA;YACAC,SAAA,EAAAT,IAAA,CAAAR,EAAA;YACAG,QAAA,EAAAK,IAAA,CAAAL;UACA;QACA,GACAR,IAAA,WAAAC,QAAA;UAAA,OAAAA,QAAA,CAAAC,IAAA;QAAA,GACAF,IAAA,WAAAP,IAAA;UACA,IAAAA,IAAA,CAAA8B,EAAA;YACAC,KAAA,aAAAL,MAAA,CAAAN,IAAA,CAAAL,QAAA,OAAAW,MAAA,CAAAN,IAAA,CAAAP,GAAA;UACA;YACAkB,KAAA;UACA;QACA,GACAf,KAAA,WAAAC,KAAA;UAAA,OAAAC,OAAA,CAAAD,KAAA,qBAAAA,KAAA;QAAA;MACA;QACAc,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}